(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"018a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticStyle:{height:"auto !important"},attrs:{"transition-show":"scale","transition-hide":"scale","full-width":t.maximize,"full-height":t.maximize},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("q-card",{staticStyle:{width:"1000px","max-width":"80vw","max-height":"80vh",height:"auto !important"}},[a("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[a("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("\n        Solicitar Férias\n      ")]),t.maximize?a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-minus-outline"},on:{click:function(e){t.maximize=!1}}}):a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-square-outline"},on:{click:function(e){t.maximize=!0}}}),a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.onHide}})],1),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md flex flex-center",class:{"col-md-6":t.maximize,"col-md-4":!t.maximize}},[a("v-date-picker",{attrs:{"min-date":t.period.start,columns:t.maximize?2:1,rows:t.maximize?2:1,"is-expanded":t.$screens({default:!0,lg:!1}),"is-range":"","is-inline":"",mode:"range",attributes:t.attrs,color:t.rangeIsOk?"green":"red","disabled-dates":t.disableDates},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),a("div",{staticClass:"q-pa-md",class:{"flex flex-center":!t.rangeIsNotNull||t.maximize,"col-md-6":t.maximize,"col-md-7":!t.maximize}},[a("div",{staticClass:"q-pa-md",staticStyle:{"border-radius":".5rem",border:"1px solid #BDBDBF",width:"100%"}},[t.rangeIsNotNull?a("div",[a("div",{staticClass:"column q-pa-md text-center"},[a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  Agendar férias a partir do dia\n                ")]),a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  "+t._s(t._f("moment")(t.rangeDate.start,"DD-MM-YYYY"))+" ao dia\n                  "+t._s(t._f("moment")(t.rangeDate.end,"DD-MM-YYYY"))+"?\n                ")])]),a("q-separator",{attrs:{inset:""}}),a("div",{staticClass:"q-pa-md text-subtitle1"},[a("span",[t._v("\n                  Você pode escolher\n                  "),a("b",[t._v(t._s(30-t.countDaysSolicited()))]),t._v(" dias.\n                ")]),a("br"),a("span",[t._v("\n                  Prazo limite final:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY")))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Dias Selecionados: "),a("b",[t._v(t._s(t.qtdaDias))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Periodo Referente:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.start,"DD-MM-YYYY")))]),t._v(" à\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.end,"DD-MM-YYYY")))])])]),a("div",{staticClass:"text-center"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rangeIsOk,expression:"!rangeIsOk"}],staticClass:"text-red"},[t._v("\n                  "+t._s(t.messageRange)+"\n                ")])])],1):a("div",{staticClass:"flex-center flex"},[a("span",{staticClass:"text-h6 text-center text-grey-8"},[t._v("\n                Escolha os dias que anseia em agendar as férias deste\n                colaborador\n              ")])])])])])]),a("q-card-actions",{staticClass:"text-teal container-card absolute-bottom-right"},[a("q-btn",{attrs:{color:t.rangeIsOk?"primary":"red",dense:"","no-caps":"",outline:"",rounded:"",disable:!t.rangeIsOk,label:"Agendar"},on:{click:t.onRegister}})],1),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner-facebook",{attrs:{color:"light-blue"}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{size:"2em",name:"thumb_down",color:"red"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Deseja mesmo excluir a Solicitação?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Vou pensar melhor...",color:"grey"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Sim, não quero mais!",color:"red"},on:{click:t.onDeleteRequest}})],1)],1)],1)],1)},i=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("2fdb"),a("6762"),a("7f7f"),a("a481"),a("a34a")),n=a.n(r),o=(a("96cf"),a("c973")),c=a.n(o),l=a("9523"),d=a.n(l),u=a("c1df"),p=a.n(u),f=a("5ba5"),m=a("404b"),v=a.n(m);function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){d()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"di-vacation-solicitation",components:{"v-date-picker":v.a},events:["on-close"],data:function(){return{show:!1,loading:!1,showDelete:!1,maximize:!1,period:{},vacation:{},collaborator:{},disableDates:[],rangeIsOk:!1,moment:p.a,messageRange:"",rangeDate:{start:null,end:null},holidayNational:[],attrs:[]}},computed:{rangeIsNotNull:function(){return!!this.rangeDate&&(null!==this.rangeDate.start&&null!==this.rangeDate.end)},qtdaDias:function(){return this.rangeDate?this.diffRange(this.rangeDate.start,this.rangeDate.end):0}},watch:{rangeDate:function(t){this.checkRangeDate()}},mounted:function(){},methods:{onShow:function(t){this.period={},this.rangeDate={start:null,end:null},this.collaborator={},this.show=!0,this.period=b({},t.period),this.collaborator=b({},t.collaborator),this.attrs=[],this.checkDateAcessibles()},onHide:function(){this.$emit("on-close"),this.show=!1},onShowDelete:function(){this.showDelete=!0},onRegister:function(){var t=this;return c()(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={startDate:p()(t.rangeDate.start).format("YYYY-MM-DD"),finalDate:p()(t.rangeDate.end).format("YYYY-MM-DD"),startPeriod:p()(t.period.start).format("YYYY-MM-DD"),requestUser:t.collaborator.id,status:"requested",approvalUser:localStorage.getItem("user_id")},e.next=5,t.$axios.post(t.$api.vacation,a);case 5:t.onHide(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()},onDeleteRequest:function(){var t=this;return c()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.delete(t.$api.vacationrequest.replace("{id}",t.vacation.id));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},checkDateAcessibles:function(){var t=this;return c()(n.a.mark((function e(){var a,s,i,r,o,c,l;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=function(t){var e="";switch(t){case f["a"].APPROVED:e="intervalo Aprovado";break;case f["a"].REQUESTED:e="intervalo Solicitado";break;case f["a"].REFUSED:e="intervalo Recusado";break;default:e="data solicitado";break}return e},a=function(t){var e="";switch(t){case f["a"].APPROVED:e="green";break;case f["a"].REQUESTED:e="orange";break;case f["a"].REFUSED:e="red";break;default:e="grey";break}return e},t.disableDates=t.period.requests.filter((function(t){return t.status!==f["a"].REFUSED})).map((function(t){return{start:new Date(p()(t.startDate).format("YYYY/MM/DD")),end:new Date(p()(t.finalDate).format("YYYY/MM/DD"))}})),i=t.period.requests.filter((function(t){return t.status!==f["a"].REFUSED})).map((function(t){return{popover:{label:s(t.status),visibility:"hover",hideIndicator:!0},highlight:{color:a(t.status),fillMode:"light"},dates:{start:new Date(p()(t.startDate).format("YYYY/MM/DD")),end:new Date(p()(t.finalDate).format("YYYY/MM/DD"))}}})),i.forEach((function(e){t.attrs.push(e)})),e.next=7,t.$axios.get(t.$api.holidayAll.replace("{year}",p()(t.period.start).year()));case 7:r=e.sent,o=r.data,t.holidayNational=o,c=o.map((function(t){return new Date(p()(t.date).format("YYYY/MM/DD"))})),l={dot:!0,dates:c},t.attrs.push(l),o.forEach((function(e){t.attrs.push({dates:new Date(p()(e.date).format("YYYY/MM/DD")),popover:{label:e.name}})}));case 14:case"end":return e.stop()}}),e)})))()},countDaysSolicited:function(){var t=this;return this.period.requests.length?this.period.requests.filter((function(t){return t.status!==f["a"].REFUSED})).map((function(e){return t.diffRange(e.startDate,e.finalDate)})).reduce((function(t,e){return t+e})):0},diffRange:function(t,e){return p()(e).diff(p()(t),"d")+1},checkRangeDate:function(){if(!this.rangeDate||!this.rangeDate.start||!this.rangeDate.end)return!1;var t=this.rangeDate,e=t.start,a=t.end,s=5===p()(e).weekday()||6===p()(e).weekday(),i=this.holidayNational.some((function(t){return p()(t.date).subtract(2,"d").format("YYYY-MM-DD")===p()(e).format("YYYY-MM-DD")||p()(t.date).subtract(1,"d").format("YYYY-MM-DD")===p()(e).format("YYYY-MM-DD")}));if(s)return this.messageRange="Não é possível iniciar as férias dois dias antes de domingo",this.rangeIsOk=!1,this.rangeIsOk;if(i)return this.messageRange="Não é possível iniciar as férias dois dias antes de um feriado",this.rangeIsOk=!1,this.rangeIsOk;var r=this.diffRange(e,a),n=[10,15,20,30],o=0,c="10, 15, 20, 30";switch(o=this.countDaysSolicited(),o){case 10:n.splice(n.indexOf(15),1),n.splice(n.indexOf(30),1),c="10 ou 20";break;case 15:n.splice(n.indexOf(10),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1),c="15";break;case 20:n.splice(n.indexOf(15),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1),c="10";break;case 30:n.splice(n.indexOf(10),1),n.splice(n.indexOf(15),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1);break;default:break}this.messageRange=30===o?"Este periodo atingiu a quantidade máxima de dias de direito solicitado":"Intervalo de dias permitidos: ".concat(c),this.rangeIsOk=n.includes(r)},isHexColor:function(t){var e=!1;return t&&(e=t.includes("#")),e}}},x=g,D=(a("3fe3"),a("2877")),w=a("24e8"),y=a("f09f"),_=a("65c6"),q=a("6ac5"),Y=a("9c40"),C=a("a370"),k=a("eb85"),S=a("4b7e"),E=a("74f7"),O=a("e669"),M=a("0016"),P=a("8572"),R=a("7f67"),j=a("eebe"),Q=a.n(j),A=Object(D["a"])(x,s,i,!1,null,null,null);e["a"]=A.exports;Q()(A,"components",{QDialog:w["a"],QCard:y["a"],QToolbar:_["a"],QToolbarTitle:q["a"],QBtn:Y["a"],QCardSection:C["a"],QSeparator:k["a"],QCardActions:S["a"],QInnerLoading:E["a"],QSpinnerFacebook:O["a"],QIcon:M["a"],QField:P["a"]}),Q()(A,"directives",{ClosePopup:R["a"]})},"1fab":function(t,e,a){t.exports=a.p+"img/calendar.1b04848a.png"},"3fe3":function(t,e,a){"use strict";var s=a("f8c9"),i=a.n(s);i.a},"52c9":function(t,e,a){"use strict";var s=a("c9ed"),i=a.n(s);i.a},"5ba5":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s={APPROVED:"approved",REQUESTED:"requested",REFUSED:"refused"}},"78b5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:" min-height"},[s("q-card",{staticClass:"card-vacation",attrs:{flat:""}},[s("q-card-section",{staticClass:"q-ml-md q-mt-sm q-mr-xl"},[s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4",staticStyle:{display:"block"}},[s("q-icon",{staticStyle:{display:"block"},attrs:{name:"eva-calendar-outline",color:"primary",size:"md"}}),s("span",{staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v("\n              Olá\n              "+t._s(t.collaborator.name.split(" ")[0])+"\n            ")]),s("p",{staticClass:"subtitle"},[t._v("\n              Aqui você pode agendar suas férias com seu gestor.\n            ")]),s("q-btn",{attrs:{label:"Solicitar suas férias",rounded:"","no-caps":"",color:"green",outline:"",disable:t.checkSolicitation(),size:"md"},on:{click:t.solicitationVacation}})],1)])])]),s("q-card-section",{staticClass:"q-mt-md q-pt-sm q-pb-sm"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"justify-center flex text-white q-mb-sm",class:"bg-"+(t.isHexColor(t.period.situation.color)?"":t.period.situation.color),staticStyle:{"border-radius":"1rem"},style:{color:(t.isHexColor(t.period.situation.color)?t.period.situation.color:"")+" !important"}},[s("div",{staticClass:"q-pa-sm"},[s("q-btn",{attrs:{round:"",flat:"",dense:"",disable:t.moment(t.period.start).year()-1<t.moment(t.collaborator.hiringdate).year(),icon:"eva-chevron-left-outline"},on:{click:function(e){return t.setPeriod("previous")}}})],1),s("div",[s("span",{staticClass:"text-weight-medium flex-center flex q-pa-sm",staticStyle:{"font-size":"1.3rem"}},[t._v("\n              "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+"\n              à\n              "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n            ")])]),s("div",{staticClass:"q-pa-sm"},[s("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"eva-chevron-right-outline"},on:{click:function(e){return t.setPeriod("next")}}})],1)]),s("div",{staticClass:"row "},[s("div",{staticClass:"justify-center flex col-md-12 flex-center q-ml-md q-mr-sm"},[s("q-icon",{staticClass:"q-mr-sm",style:{color:(t.isHexColor(t.period.situation.color)?t.period.situation.color:"")+" !important"},attrs:{size:"sm",color:""+(t.isHexColor(t.period.situation.color)?"":t.period.situation.color),name:t.period.situation.icon}}),s("span",{staticClass:"text-subtitle2",class:"text-"+(t.isHexColor(t.period.situation.color)?"":t.period.situation.color),style:{color:(t.isHexColor(t.period.situation.color)?t.period.situation.color:"")+" !important"}},[t._v("\n              "+t._s(t.period.situation.tooltip)+"\n              "),s("q-tooltip",{attrs:{offset:[10,10],delay:300,"content-style":{fontSize:"16px",border:"2px solid #BDBDBF",color:(t.isHexColor(t.period.situation.color)?t.period.situation.color:"")+" !important"},"content-class":"bg-grey-1 text-"+(t.isHexColor(t.period.situation.color)?"":t.period.situation.color)}},[t._v("\n                "+t._s(t.period.situation.description)+"\n              ")])],1)],1),s("div",{staticClass:"flex flex-center "})])]),s("q-space",{staticClass:"q-pa-lg"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[t.period.requests.length?s("div",{staticClass:"col-md-5"},[s("ul",{staticClass:"caixa-ul",staticStyle:{overflow:"auto","max-height":"30vh"}},t._l(t.period.requests,(function(e){return s("li",{key:e.id,staticClass:"row justify-between box-li q-ma-sm"},[s("div",{staticClass:"row justify-between flex-center"},[s("div",{staticClass:"q-ma-md"},[s("circle-calendar",{attrs:{date:e.startDate}})],1),s("div",{staticClass:"column"},[s("q-icon",{attrs:{color:"grey",size:"md",name:"eva-arrow-forward-outline"}}),s("span",{staticClass:"text-grey"},[t._v("\n                      "+t._s(t._f("moment")(e.startDate,"YYYY"))+"\n                    ")])],1),s("div",{staticClass:"q-ma-md"},[s("circle-calendar",{attrs:{date:e.finalDate}})],1),s("div",{staticClass:"q-ma-md "},[s("span",{staticClass:"texto"},[t._v("Férias")]),s("br"),s("span",[t._v("\n                      "+t._s(t.moment(e.finalDate).diff(t.moment(e.startDate),"days")+1)+"\n                      dias\n                    ")])])]),s("div",{staticClass:"text-grey"},[t._v("\n                  "+t._s(e.approvalVacation.filter((function(e){return[t.status.APPROVED,t.status.REFUSED].includes(e.status)})).length)+"/2\n\n                  "),s("q-tooltip",[t._v("Solicitações respondidas")])],1),s("div",{staticClass:"float-right"},[s("q-chip",{attrs:{clickable:"",color:t.setColor(e.status),"text-color":"white"}},[t._v("\n                    "+t._s(t.setLabel(e.status))+"\n                  ")])],1),s("div",[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.status!==t.status.APPROVED&&e.status!==t.status.REFUSED,expression:"\n                      request.status !== status.APPROVED &&\n                        request.status !== status.REFUSED\n                    "}],staticClass:"q-ml-sm",attrs:{color:"grey",round:"",flat:"",icon:"eva-more-vertical-outline"}},[s("q-menu",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"}},[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{attrs:{clickable:""},on:{click:function(a){return t.excluirVacationRequest(e)}}},[s("q-item-section",[t._v("Excluir")])],1)],1)],1)],1)],1)])})),0)]):s("div",{staticClass:"column flex-center"},[s("q-img",{staticStyle:{"max-width":"285px"},attrs:{src:a("1fab")}}),s("br"),s("span",{staticClass:"text-subtitle1",staticStyle:{color:"#999999"}},[t._v("\n              Não há nenhuma solicitação de férias agendadas\n            ")])],1)]),s("div",{staticClass:"col-md-6 bg-grey-3 ",staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif","border-radius":".5rem",border:"1px solid #BDBDBF",transform:"scale(.8)"}},[s("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?s("span",{style:{color:t.period.situation.color}},[t._v("\n              Período\n              "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+" ao\n              "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n            ")]):t._e()]),s("q-separator",{attrs:{inset:""}}),s("div",{staticClass:"text-center text-weight-regular",staticStyle:{"font-size":"1.2rem"}},[t._v("\n            Dias de direito\n          ")]),s("div",{staticClass:"row justify-evenly"},[s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.period.daysAllowed))]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("Totais")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                "+t._s(t.period.daysBalance)+"\n              ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                Disponíveis\n              ")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                "+t._s(t.period.daysScheduled)+"\n              ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                Agendados\n              ")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                "+t._s(t.period.daysEnjoyed)+"\n              ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                Usufruidos\n              ")])])],1),s("q-separator",{attrs:{inset:""}}),s("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?s("span",{style:{color:t.period.situation.color}},[t._v("\n              Prazo limite com 6 meses\n              "+t._s(t._f("moment")(t.period.limitEnterprise,"DD-MM-YYYY"))+"\n              "),s("br"),t._v("\n              Prazo limite final\n              "+t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY"))+"\n            ")]):t._e()])],1)])],1)],1),s("di-vacation-solicitation",{ref:"solicitationVacation",on:{"on-close":function(e){return t.setPeriod("current")}}})],1)},i=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("6762"),a("2fdb"),a("a34a")),n=a.n(r),o=a("9523"),c=a.n(o),l=(a("a481"),a("96cf"),a("c973")),d=a.n(l),u=a("c1df"),p=a.n(u),f=a("5ba5"),m=a("a251"),v=a("018a");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"vacationRequest",events:["on-close"],components:{circleCalendar:m["a"],diVacationSolicitation:v["a"]},data:function(){return{moment:p.a,status:f["a"],collaborator:{id:localStorage.getItem("user_collaborator_id"),name:localStorage.getItem("user_name"),hiringdate:localStorage.getItem("user_hiringdate")},situation:{},period:{situation:{},requests:[]}}},mounted:function(){this.getPeriod()},methods:{getPeriod:function(){var t=this;return d()(n.a.mark((function e(){var a,s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get(t.$api.period.replace("{id}",t.collaborator.id));case 3:a=e.sent,s=a.data,t.period=b({},s),t.period.requests=t.period.requests.map((function(e){return b(b({},e),{},{status:t.handleStatus(e.approvalVacation)})})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleStatus:function(t){if(!t.length)return f["a"].REQUESTED;var e=t.filter((function(t){return t.status===f["a"].APPROVED})).length,a=t.filter((function(t){return t.status===f["a"].REFUSED})).length;return a>0?f["a"].REFUSED:2===e?f["a"].APPROVED:f["a"].REQUESTED},setPeriod:function(t){var e=this;return d()(n.a.mark((function a(){var s,i,r;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=p()(e.period.start).clone().year(),a.t0=t,a.next="next"===a.t0?4:"previous"===a.t0?6:"current"===a.t0?8:9;break;case 4:return s++,a.abrupt("break",10);case 6:return s--,a.abrupt("break",10);case 8:return a.abrupt("break",10);case 9:return a.abrupt("return",!1);case 10:return a.next=12,e.$axios.get(e.$api.getPeriodbyYear.replace("{id}",e.collaborator.id),{params:{year:s}});case 12:i=a.sent,r=i.data,e.period=b({},r),e.period.requests=e.period.requests.map((function(t){return b(b({},t),{},{status:e.handleStatus(t.approvalVacation)})}));case 16:case"end":return a.stop()}}),a)})))()},excluirVacationRequest:function(t){var e=this;return d()(n.a.mark((function a(){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$axios.delete(e.$api.vacationrequest.replace("{id}",t.id));case 4:e.setPeriod("current"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:return a.prev=10,e.loading=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})))()},alterStatusVacation:function(t,e){var a=this;return d()(n.a.mark((function s(){var i;return n.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a.loading=!0,i={id:t.id,status:e},s.next=5,a.$axios.post(a.$api.vacationstatus,i);case 5:a.setPeriod("current"),t.status=e,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:return s.prev=12,a.loading=!1,s.finish(12);case 15:case"end":return s.stop()}}),s,null,[[0,9,12,15]])})))()},solicitationVacation:function(){this.$refs.solicitationVacation.onShow({period:this.period,collaborator:this.collaborator})},checkSolicitation:function(){var t=!0;return t=0===this.period.daysBalance,t},isHexColor:function(t){var e=!1;return t&&(e=t.includes("#")),e},setColor:function(t){var e="";switch(t){case f["a"].APPROVED:e="green-13";break;case f["a"].REQUESTED:e="amber-13";break;case f["a"].REFUSED:e="red";break;default:e="grey";break}return e},setLabel:function(t){var e="";switch(t){case f["a"].APPROVED:e="Aprovado";break;case f["a"].REQUESTED:e="Aguardando";break;case f["a"].REFUSED:e="Recusado";break;default:e="indefinido";break}return e}}},x=g,D=(a("52c9"),a("2877")),w=a("9989"),y=a("f09f"),_=a("a370"),q=a("0016"),Y=a("9c40"),C=a("05c0"),k=a("2c91"),S=a("b047"),E=a("4e73"),O=a("1c1c"),M=a("66e5"),P=a("4074"),R=a("068f"),j=a("eb85"),Q=a("8572"),A=a("eebe"),z=a.n(A),I=Object(D["a"])(x,s,i,!1,null,"43aa43ab",null);e["default"]=I.exports;z()(I,"components",{QPage:w["a"],QCard:y["a"],QCardSection:_["a"],QIcon:q["a"],QBtn:Y["a"],QTooltip:C["a"],QSpace:k["a"],QChip:S["a"],QMenu:E["a"],QList:O["a"],QItem:M["a"],QItemSection:P["a"],QImg:R["a"],QSeparator:j["a"],QField:Q["a"]})},a251:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"50px",height:"50px","border-radius":"20px","background-color":"#f2f4f5","text-align":"center",overflow:"hidden",transition:"background .2s ease-in-out"}},[a("div",{staticStyle:{"font-size":"8px",height:"15px","line-height":"15px","background-color":"#d83556","font-weight":"600",color:"white","text-transform":"uppercase"}},[t._v("\n    "+t._s(t.getMonth(parseInt(t.date.split("-")[1])))+"\n  ")]),a("div",{staticStyle:{"font-size":"16px",height:"35px","line-height":"30px","font-weight":"500"}},[t._v("\n    "+t._s(t._f("moment")(t.date,"DD"))+"\n  ")])])},i=[],r=(a("28a5"),a("c1df")),n=a.n(r),o={name:"circleCalendar",components:{},props:{date:{type:String,default:"2010-01-01"}},data:function(){return{moment:n.a}},methods:{getMonth:function(t){return t--,"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_")[t]}}},c=o,l=a("2877"),d=Object(l["a"])(c,s,i,!1,null,null,null);e["a"]=d.exports},c9ed:function(t,e,a){},f8c9:function(t,e,a){}}]);