(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"018a":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticStyle:{height:"auto !important"},attrs:{"transition-show":"scale","transition-hide":"scale","full-width":t.maximize,"full-height":t.maximize},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("q-card",{staticStyle:{width:"1000px","max-width":"80vw","max-height":"80vh",height:"auto !important"}},[a("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[a("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("\n        Solicitar Férias\n      ")]),t.maximize?a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-minus-outline"},on:{click:function(e){t.maximize=!1}}}):a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-square-outline"},on:{click:function(e){t.maximize=!0}}}),a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.onHide}})],1),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md flex flex-center",class:{"col-md-6":t.maximize,"col-md-4":!t.maximize}},[a("v-date-picker",{attrs:{"min-date":t.period.start,columns:t.maximize?2:1,rows:t.maximize?2:1,"is-expanded":t.$screens({default:!0,lg:!1}),"is-range":"","is-inline":"",mode:"range",attributes:t.attrs,color:t.rangeIsOk?"green":"red","disabled-dates":t.disableDates},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),a("div",{staticClass:"q-pa-md",class:{"flex flex-center":!t.rangeIsNotNull||t.maximize,"col-md-6":t.maximize,"col-md-7":!t.maximize}},[a("div",{staticClass:"q-pa-md",staticStyle:{"border-radius":".5rem",border:"1px solid #BDBDBF",width:"100%"}},[t.rangeIsNotNull?a("div",[a("div",{staticClass:"column q-pa-md text-center"},[a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  Agendar férias a partir do dia\n                ")]),a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  "+t._s(t._f("moment")(t.rangeDate.start,"DD-MM-YYYY"))+" ao dia\n                  "+t._s(t._f("moment")(t.rangeDate.end,"DD-MM-YYYY"))+"?\n                ")])]),a("q-separator",{attrs:{inset:""}}),a("div",{staticClass:"q-pa-md text-subtitle1"},[a("span",[t._v("\n                  Você pode escolher\n                  "),a("b",[t._v(t._s(30-t.countDaysSolicited()))]),t._v(" dias.\n                ")]),a("br"),a("span",[t._v("\n                  Prazo limite final:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY")))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Dias Selecionados: "),a("b",[t._v(t._s(t.qtdaDias))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Periodo Referente:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.start,"DD-MM-YYYY")))]),t._v(" à\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.end,"DD-MM-YYYY")))])])]),a("div",{staticClass:"text-center"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rangeIsOk,expression:"!rangeIsOk"}],staticClass:"text-red"},[t._v("\n                  "+t._s(t.messageRange)+"\n                ")])])],1):a("div",{staticClass:"flex-center flex"},[a("span",{staticClass:"text-h6 text-center text-grey-8"},[t._v("\n                Escolha os dias que anseia em agendar as férias deste\n                colaborador\n              ")])])])])])]),a("q-card-actions",{staticClass:"text-teal container-card absolute-bottom-right"},[a("q-btn",{attrs:{color:t.rangeIsOk?"primary":"red",dense:"","no-caps":"",outline:"",rounded:"",disable:!t.rangeIsOk,label:"Agendar"},on:{click:t.onRegister}})],1),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner-facebook",{attrs:{color:"light-blue"}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{size:"2em",name:"thumb_down",color:"red"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Deseja mesmo excluir a Solicitação?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Vou pensar melhor...",color:"grey"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Sim, não quero mais!",color:"red"},on:{click:t.onDeleteRequest}})],1)],1)],1)],1)},i=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7f7f"),a("448a")),s=a.n(o),n=(a("6762"),a("a481"),a("a34a")),l=a.n(n),c=(a("96cf"),a("c973")),d=a.n(c),u=a("9523"),p=a.n(u),f=a("c1df"),m=a.n(f),h=a("5ba5"),b=a("404b"),v=a.n(b);function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){p()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var x={name:"di-vacation-solicitation",components:{"v-date-picker":v.a},events:["on-close"],data:function(){return{show:!1,loading:!1,showDelete:!1,maximize:!0,period:{},vacation:{},collaborator:{},disableDates:[],rangeIsOk:!1,moment:m.a,messageRange:"",rangeDate:{start:null,end:null},holidayNational:[],attrs:[]}},computed:{rangeIsNotNull:function(){return!!this.rangeDate&&(null!==this.rangeDate.start&&null!==this.rangeDate.end)},qtdaDias:function(){return this.rangeDate?m()(this.rangeDate.end).diff(m()(this.rangeDate.start),"days"):0}},watch:{rangeDate:function(t){this.checkRangeDate()}},mounted:function(){},methods:{onShow:function(t){this.period={},this.rangeDate={start:null,end:null},this.collaborator={},this.show=!0,this.period=y({},t.period),this.collaborator=y({},t.collaborator),this.attrs=[],this.checkDateAcessibles()},onHide:function(){this.$emit("on-close"),this.show=!1},onShowDelete:function(){this.showDelete=!0},onRegister:function(){var t=this;return d()(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={startDate:m()(t.rangeDate.start).format("YYYY-MM-DD"),finalDate:m()(t.rangeDate.end).format("YYYY-MM-DD"),startPeriod:m()(t.period.start).format("YYYY-MM-DD"),requestUser:t.collaborator.id,status:"requested",approvalUser:localStorage.getItem("user_id")},e.next=5,t.$axios.post(t.$api.vacation,a);case 5:t.onHide(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()},onDeleteRequest:function(){var t=this;return d()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.delete(t.$api.vacationrequest.replace("{id}",t.vacation.id));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},countDaysSolicited:function(){return this.period.requests.length?this.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return m()(t.finalDate).diff(t.startDate,"day")})).reduce((function(t,e){return t+e})):0},checkRangeDate:function(){if(!this.rangeDate||!this.rangeDate.start||!this.rangeDate.end)return!1;var t=this.rangeDate,e=t.start,a=t.end,r=5===m()(e).weekday()||6===m()(e).weekday(),i=this.holidayNational.some((function(t){return m()(t.date).subtract(2,"d").format("YYYY-MM-DD")===m()(e).format("YYYY-MM-DD")||m()(t.date).subtract(1,"d").format("YYYY-MM-DD")===m()(e).format("YYYY-MM-DD")}));if(r)return this.messageRange="Não é possível iniciar as férias dois dias antes de domingo",this.rangeIsOk=!1,this.rangeIsOk;if(i)return this.messageRange="Não é possível iniciar as férias dois dias antes de um feriado",this.rangeIsOk=!1,this.rangeIsOk;var o=m()(a).diff(m()(e),"d"),s=[10,15,20,30],n=0,l="10, 15, 20, 30";switch(n=this.countDaysSolicited(),n){case 10:s.splice(s.indexOf(15),1),s.splice(s.indexOf(30),1),l="10 ou 20";break;case 15:s.splice(s.indexOf(10),1),s.splice(s.indexOf(20),1),s.splice(s.indexOf(30),1),l="15";break;case 20:s.splice(s.indexOf(15),1),s.splice(s.indexOf(20),1),s.splice(s.indexOf(30),1),l="10";break;case 30:s.splice(s.indexOf(10),1),s.splice(s.indexOf(15),1),s.splice(s.indexOf(20),1),s.splice(s.indexOf(30),1);break;default:break}this.messageRange=30===n?"Este periodo atingiu a quantidade máxima de dias de direito solicitado":"Intervalo de dias permitidos: ".concat(l),this.rangeIsOk=s.includes(o)},checkDateAcessibles:function(){var t=this;return d()(l.a.mark((function e(){var a,r,i,o,n,c,d,u,p,f,b,v,g,y;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(t){var e="";switch(t){case h["a"].APPROVED:e="intervalo Aprovada";break;case h["a"].REQUESTED:e="intervalo Solicitada";break;case h["a"].REFUSED:e="intervalo Recusado";break;default:e="data solicitado";break}return e},a=function(t){var e="";switch(t){case h["a"].APPROVED:e="green";break;case h["a"].REQUESTED:e="orange";break;case h["a"].REFUSED:e="red";break;default:e="grey";break}return e},t.disableDates=t.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return{start:new Date(t.startDate),end:new Date(t.finalDate)}})),i=t.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return{popover:{label:r(t.status),visibility:"hover",hideIndicator:!0},highlight:{color:a(t.status),fillMode:"light"},dates:{start:new Date(t.startDate),end:new Date(t.finalDate)}}})),i.forEach((function(e){t.attrs.push(e)})),e.next=7,t.$axios.get(t.$api.holydayRegional.replace("{year}",m()(t.period.start).year()));case 7:return o=e.sent,n=o.data,e.next=11,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.start).year()));case 11:return c=e.sent,d=c.data,e.next=15,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.end).year()));case 15:return u=e.sent,p=u.data,e.next=19,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.ultimate).year()));case 19:f=e.sent,b=f.data,v=[].concat(s()(n),s()(d),s()(p),s()(b)),t.holidayNational=v,g=v.map((function(t){return new Date(t.date)})),y={dot:!0,dates:g},t.attrs.push(y),v.forEach((function(e){t.attrs.push({dates:new Date(e.date),popover:{label:e.name}})}));case 27:case"end":return e.stop()}}),e)})))()}}},_=x,w=(a("3fe3"),a("2877")),q=a("24e8"),D=a("f09f"),C=a("65c6"),k=a("6ac5"),S=a("9c40"),Y=a("a370"),O=a("eb85"),M=a("4b7e"),j=a("74f7"),E=a("e669"),Q=a("0016"),$=a("8572"),F=a("7f67"),P=a("eebe"),A=a.n(P),T=Object(w["a"])(_,r,i,!1,null,null,null);e["a"]=T.exports;A()(T,"components",{QDialog:q["a"],QCard:D["a"],QToolbar:C["a"],QToolbarTitle:k["a"],QBtn:S["a"],QCardSection:Y["a"],QSeparator:O["a"],QCardActions:M["a"],QInnerLoading:j["a"],QSpinnerFacebook:E["a"],QIcon:Q["a"],QField:$["a"]}),A()(T,"directives",{ClosePopup:F["a"]})},"03a9":function(t,e,a){"use strict";var r=a("d14e"),i=a.n(r);i.a},"0ac2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"justify-center min-height"},[a("div",[a("dt-collaborator")],1)])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{staticClass:"my-sticky-header-table",staticStyle:{"background-color":"#FAFAFA"},attrs:{"row-key":"id",loading:t.loading,flat:"",data:t.data,columns:t.columns,"visible-columns":t.visibleColumns,filter:t.filter,"hide-pagination":"",pagination:t.pagination,"rows-per-page-label":"Registros por páginas","no-results-label":"Collaborador não encontrado","no-data-label":"Ainda não temos colaboradores cadastrados"},on:{request:t.onRequest},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}},[a("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1)]},proxy:!0},{key:"top",fn:function(){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{display:"block"}},[a("q-icon",{staticStyle:{display:"block"},attrs:{name:"eva-people-outline",color:"primary",size:"md"}}),a("span",{staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v("\n              Colaboradores\n            ")]),a("p",{staticClass:"subtitle"},[t._v("\n              Sinta-se a vontade para acompanhar o estado atual de seus\n              colaboradores.\n            ")])],1),a("div",{staticClass:"col-md-3 bg-grey-3 offset-md-3 row justify-around",staticStyle:{"border-radius":"1rem",transform:"scale(.7)"}},[a("div",{staticClass:"column justify-center text-center"},[a("span",{staticStyle:{display:"inline-block",font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v(t._s(t.data.length))]),a("span",{staticClass:"text-weight-regular text-h6"},[t._v("Colaboradores")])]),a("q-separator",{attrs:{vertical:"",inset:""}})],1)]),a("div",{staticClass:"row justify-between",class:{"justify-center":t.$q.screen.lt.sm},staticStyle:{width:"100%","margin-top":"1rem"}},[a("div",{staticClass:"col-md-2 col-sm-4"},[a("q-btn",{attrs:{label:"Adicionar Colaborador",dense:"",flat:"","no-caps":"",color:"primary",icon:"add"},on:{click:t.openDialogColaborador}})],1),a("div",{staticClass:"col-md-4 col-sm-4"},[a("q-btn",{attrs:{label:"Importar lista de Colaboradores",dense:"",flat:"","no-caps":"",color:"primary",icon:"eva-cloud-upload-outline"},on:{click:t.openDialogImportColaborador}})],1),a("div",{staticClass:"col-md-4 col-sm-5"},[a("q-input",{staticClass:"float-right",attrs:{dense:"",filled:"",debounce:"750",placeholder:"Busca"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)],1)])])]},proxy:!0},{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},[t._l(e.cols.filter((function(t){return"id"!==t.name})),(function(r){return a("q-th",{key:r.name,attrs:{props:e}},[t._v(t._s(r.label))])})),a("q-th",[t._v(" Ações ")])],2)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer custom-table",attrs:{props:e}},[a("q-td",{key:"situation",staticStyle:{width:"5%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[a("q-icon",{attrs:{size:"md",color:e.row.situation.color,name:e.row.situation.icon}}),a("q-tooltip",{attrs:{"content-class":"bg-grey-1 ","content-style":"font-size: 16px; color: #575858; border: 2px solid #BDBDBF; width: 300px",offset:[10,10],delay:300}},[a("div",[t._v("\n               \n              "),a("q-icon",{attrs:{size:"22px",name:e.row.situation.icon,color:e.row.situation.color}}),t._v(" \n              "),a("span",{style:{color:e.row.situation.color}},[t._v(t._s(e.row.situation.description))]),a("br"),a("span",{staticClass:"subtitle",staticStyle:{"font-size":".9rem"}},[t._v("      "+t._s(e.row.situation.tooltip))])],1)])],1),a("q-td",{key:"register",staticStyle:{width:"10%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[t._v("\n          "+t._s(e.row.register)+"\n        ")]),a("q-td",{key:"type",staticStyle:{width:"10%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[t._v("\n          "+t._s(t.maskType(e.row.type))+"\n        ")]),a("q-td",{key:"name",staticStyle:{width:"30%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[t._v("\n          "+t._s(e.row.name)+"\n        ")]),a("q-td",{key:"birthday",staticStyle:{width:"10%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[t._v("\n          "+t._s(t._f("moment")(e.row.birthday,"DD-MM-YYYY"))+"\n        ")]),a("q-td",{key:"hiringdate",staticStyle:{width:"10%"},attrs:{props:e},on:{click:function(a){return t.openVacation(e.row)}}},[t._v("\n          "+t._s(t._f("moment")(e.row.hiringdate,"DD-MM-YYYY"))+"\n        ")]),a("q-td",{staticStyle:{width:"5%"}},[a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"grey",round:"",flat:"",icon:"eva-more-vertical-outline"}},[a("q-menu",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"}},[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{attrs:{clickable:""},on:{click:function(a){return t.openEdit(e.row)}}},[a("q-item-section",[a("q-icon",{attrs:{color:"blue",name:"eva-edit-outline"}})],1),a("q-item-section",{staticClass:"text-blue"},[t._v("editar")])],1),a("q-item",{attrs:{clickable:""},on:{click:function(a){return t.openDelete(e.row)}}},[a("q-item-section",[a("q-icon",{attrs:{color:"red",name:"eva-trash-2-outline"}})],1),a("q-item-section",{staticClass:"text-red"},[t._v("excluir")])],1)],1)],1)],1)],1)],1)]}}])}),a("q-dialog",{attrs:{persistent:""},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{size:"2em",name:"thumb_down",color:"red"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Deseja mesmo excluir o Colaborador?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Vou pensar melhor...",color:"grey"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Desejo sim!",color:"red"},on:{click:t.deleteCollaborator}})],1)],1)],1),a("di-import-colaborador",{ref:"di-import-colaborador",attrs:{columns:t.columns,data:t.data}}),a("di-collaborator",{ref:"di-collaborator",staticStyle:{height:"auto !important"},on:{"on-close":t.refresh}}),a("di-vacation",{ref:"di-vacation-request",on:{"on-close":t.refresh}})],1)},s=[],n=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),l=a.n(n),c=(a("a481"),a("a34a")),d=a.n(c),u=a("448a"),p=a.n(u),f=(a("96cf"),a("c973")),m=a.n(f),h=a("1f7c"),b=a("c1df"),v=a.n(b),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("q-card",{staticStyle:{width:"700px","max-width":"80vw","max-height":"90vh",height:"auto"}},[r("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[r("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("Importar Colaboradores")]),r("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.canceled}})],1),r("q-card-section",[r("div",{staticClass:"row items-center justify-center"},[r("q-icon",{attrs:{size:"2em",name:"eva-cloud-download-outline",color:"primary"}}),r("span",{staticClass:"q-ml-sm"},[t._v("Passo 1) Baixe o Modelo a baixo e preencha-o conforme seu\n          Layout!")])],1),r("div",{staticClass:"row items-center justify-center"},[r("vue-json-to-csv",{attrs:{"json-data":[{register:"",name:"",birthday:"",hiringdate:"",periodOk:"",daysEnjoyed:""}],separator:";","csv-title":"Modelo de Colaboradores",labels:{register:{title:"matricula"},name:{title:"nome"},birthday:{title:"data_de_nascimento"},hiringdate:{title:"data_de_admissao"},periodOk:{title:"periodo_sem_pendencias"},daysEnjoyed:{title:"qtda_dias_usufruidos_recente"}}}},[r("q-btn",{staticClass:"q-ma-sm",attrs:{"no-caps":"",dense:"",label:"Baixar Modelo!",color:"secondary",icon:"eva-cloud-download-outline"}})],1)],1)]),r("q-card-section",{staticClass:"flex flex-center"},[r("div",{staticClass:"row justify-center"},[r("q-img",{staticStyle:{"max-width":"500px",opacity:".8"},attrs:{src:a("a567")}})],1),r("div",{staticClass:"q-mb-lg"},[r("q-icon",{attrs:{size:"2em",name:"eva-settings-outline",color:"primary"}}),r("span",{staticClass:"q-ml-sm"},[t._v("Passo 2) Salve seu Modelo preenchido e arraste-o para esta area\n          abaixo!")])],1),r("div",{staticClass:"row justify-center"},[r("vue-csv-import",{attrs:{inputClass:"col-md-12 custom-file-input",headers:!0,"map-fields":["matricula","nome","data_de_admissao","data_de_nascimento","periodo_sem_pendencias","qtda_dias_usufruidos_recente"],autoMatchFields:"",autoMatchIgnoreCase:""},on:{"reset-csv":function(e){t.csv=[]}},model:{value:t.csv,callback:function(e){t.csv=e},expression:"csv"}})],1)]),r("q-slide-transition",[this.failImportation?r("q-card-section",[this.csv.length?r("div",{staticClass:"flex flex-center"},[r("div",{staticClass:"row"},[this.csv.length-this.listFails.length>0?r("p",{staticClass:"text-weight-light",staticStyle:{color:"green"}},[t._v("\n              "+t._s(t.csv.length-t.listFails.length)+"\n              "+t._s(t.csv.length-t.listFails.length>1?"colaboradores foram inseridos":"colaborador foi inserido")+"!\n            ")]):t._e(),this.csv.length-this.listFails.length===0?r("p",{staticClass:"text-weight-light",staticStyle:{color:"red"}},[t._v("\n              "+t._s(t.listFails.length)+"\n              "+t._s(t.listFails.length>1?"colaboradores tiveram problemas":"colaborador teve problema")+"!\n            ")]):r("p",{staticClass:"text-weight-light",staticStyle:{color:"red"}},[t._v("\n              ...porém "+t._s(t.listFails.length)+"\n              "+t._s(t.listFails.length>1?"tiveram problemas":"teve problema")+"!\n            ")])])]):t._e()]):t._e()],1),r("q-slide-transition",[this.failImportation?r("q-card-section",[this.csv.length?r("div",{staticClass:"flex flex-center"},[r("div",{staticClass:"row"},[r("q-markup-table",{staticClass:"col-12",staticStyle:{"max-height":"30vh"},attrs:{separator:"vertical"}},[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v("Linha na Tabela")]),r("th",{staticClass:"text-right"},[t._v("Problema Encontrado")])])]),t._l(t.listFails,(function(e){return r("tbody",{key:e.name},[r("tr",[r("td",{staticClass:"text-left"},[t._v(t._s(e.errorLine))]),r("td",{staticClass:"text-right"},[t._v(t._s(e.error))])])])}))],2)],1)]):t._e()]):t._e()],1),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Fechar",color:"grey"},on:{click:t.refresh}}),r("q-btn",{attrs:{color:"green",disable:0===this.csv.length||this.failImportation,loading:t.loading,"no-caps":"",icon:"send",label:"Enviar"},on:{click:t.confirm},scopedSlots:t._u([{key:"loading",fn:function(){return[r("q-spinner-facebook")]},proxy:!0}])})],1)],1)],1)},y=[],x=a("055a"),_=a.n(x),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row items-center"},[a("div",{staticClass:"form"},[a("div",{staticClass:"vue-csv-uploader-part-one"},[a("q-uploader",{ref:"csv",staticStyle:{"max-width":"300px"},attrs:{name:"csv"},on:{change:function(e){return e.preventDefault(),t.validFileMimeType(e)},added:t.load,removed:t.reset},scopedSlots:t._u([{key:"header",fn:function(e){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[e.queuedFiles.length>0?a("q-btn",{attrs:{icon:"clear_all","no-caps":"",dense:"",flat:""},on:{click:e.removeQueuedFiles}},[t._v("\n              Limpar Area\n              "),a("q-tooltip",[t._v("Limpar area")])],1):t._e(),e.uploadedFiles.length>0?a("q-btn",{attrs:{icon:"done_all",round:"",dense:"",flat:""},on:{click:e.removeUploadedFiles}},[a("q-tooltip",[t._v("Remove Uploaded Files")])],1):t._e(),e.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):t._e(),e.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box","no-caps":"",dense:"",flat:""}},[t._v("\n              Subir Arquivo csv\n              "),a("q-uploader-add-trigger"),a("q-tooltip",[t._v("Adicionar Arquivo CSV")])],1):t._e(),e.isUploading?a("q-btn",{attrs:{icon:"clear",round:"",dense:"",flat:""},on:{click:e.abort}},[a("q-tooltip",[t._v("Abort Upload")])],1):t._e()],1)]}},{key:"list",fn:function(e){return[a("q-list",{attrs:{separator:""}},t._l(e.files,(function(r){return a("q-item",{key:r.name},[a("q-item-section",[a("q-item-label",{staticClass:"full-width ellipsis"},[t._v("\n                  "+t._s(r.name)+"\n                ")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n                  Colaboradores encontrado: "+t._s(t.value.length)+"\n                ")])],1),r.__img?a("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[a("img",{attrs:{src:r.__img.src}})]):t._e(),a("q-item-section",{attrs:{top:"",side:""}},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return e.removeFile(r)}}})],1)],1)})),1)]}}]),model:{value:t.csv,callback:function(e){t.csv=e},expression:"csv"}}),a("div",{staticClass:"form-group csv-import-file"},[t.showErrorMessage?t._t("error",[a("div",{staticClass:"invalid-feedback d-block"},[t._v("Tipo de Arquivo Invalido")])]):t._e()],2),a("div",{staticClass:"form-group"},[t._t("next",null,{load:t.load})],2)],1)])])},q=[],D=(a("7f7f"),a("551c"),a("097d"),a("2ef0")),C=a("bc3a"),k=a.n(C),S=a("369b"),Y=a.n(S),O=a("cc1d"),M=a.n(O),j={events:["reset-csv"],props:{value:Array,url:{type:String},mapFields:{required:!0},callback:{type:Function,default:function(){return{}}},catch:{type:Function,default:function(){return{}}},finally:{type:Function,default:function(){return{}}},parseConfig:{type:Object,default:function(){return{}}},headers:{default:null},loadBtnText:{type:String,default:"Next"},submitBtnText:{type:String,default:"Submit"},autoMatchFields:{type:Boolean,default:!1},autoMatchIgnoreCase:{type:Boolean,default:!1},tableClass:{type:String,default:"table"},checkboxClass:{type:String,default:"form-check-input"},buttonClass:{type:String,default:"btn btn-primary"},inputClass:{type:String,default:"form-control-file"},validation:{type:Boolean,default:!0},fileMimeTypes:{type:Array,default:function(){return["text/csv","text/x-csv","application/vnd.ms-excel","text/plain"]}},tableSelectClass:{type:String,default:"form-control"},canIgnore:{type:Boolean,default:!1}},data:function(){return{form:{csv:null},fieldsToMap:[],map:{},hasHeaders:!0,csv:null,sample:null,isValidFileMimeType:!1,fileSelected:!1}},created:function(){this.hasHeaders=this.headers,Object(D["isArray"])(this.mapFields)?this.fieldsToMap=Object(D["map"])(this.mapFields,(function(t){return{key:t,label:t}})):this.fieldsToMap=Object(D["map"])(this.mapFields,(function(t,e){return{key:e,label:t}}))},methods:{submit:function(){var t=this;this.form.csv=this.buildMappedCsv(),this.$emit("input",this.form.csv),this.url?k.a.post(this.url,this.form).then((function(e){t.callback(e)})).catch((function(e){t.catch(e)})).finally((function(e){t.finally(e)})):t.callback(this.form.csv)},reset:function(){this.$emit("reset-csv")},buildMappedCsv:function(){var t=this,e=this.hasHeaders?Object(D["drop"])(this.csv):this.csv;return Object(D["map"])(e,(function(e){var a={};return Object(D["forEach"])(t.map,(function(t,r){Object(D["set"])(a,r,Object(D["get"])(e,t))})),a}))},validFileMimeType:function(){var t=this.$refs.csv.files[0],e=""===t.type?M.a.lookup(t.name):t.type;t?(this.fileSelected=!0,this.isValidFileMimeType=!this.validation||this.validateMimeType(e)):(this.isValidFileMimeType=!this.validation,this.fileSelected=!1)},validateMimeType:function(t){return this.fileMimeTypes.indexOf(t)>-1},load:function(){var t=this;this.readFile((function(e){t.sample=Object(D["get"])(Y.a.parse(e,{preview:2,skipEmptyLines:!0}),"data"),t.csv=Object(D["get"])(Y.a.parse(e,{skipEmptyLines:!0}),"data")}))},readFile:function(t){var e=this.$refs.csv.files[0];if(e){var a=new FileReader;a.readAsText(e,"UTF-8"),a.onload=function(e){t(e.target.result)},a.onerror=function(){}}},toggleHasHeaders:function(){this.hasHeaders=!this.hasHeaders},makeId:function(t){return"".concat(t).concat(this._uid)}},watch:{map:{deep:!0,handler:function(t){if(!this.url){var e=Array.isArray(this.mapFields)?Object(D["every"])(this.mapFields,(function(e){return t.hasOwnProperty(e)})):Object(D["every"])(this.mapFields,(function(e,a){return t.hasOwnProperty(a)}));e&&this.submit()}}},sample:function(t,e){var a=this;this.autoMatchFields&&null!==t&&this.fieldsToMap.forEach((function(e){t[0].forEach((function(t,r){!0===a.autoMatchIgnoreCase?e.label.toLowerCase().trim()===t.toLowerCase().trim()&&a.$set(a.map,e.key,r):e.label.trim()===t.trim()&&a.$set(a.map,e.key,r)}))}))}},computed:{firstRow:function(){return Object(D["get"])(this,"sample.0")},showErrorMessage:function(){return this.fileSelected&&!this.isValidFileMimeType},disabledNextButton:function(){return!this.isValidFileMimeType}}},E=j,Q=a("2877"),$=a("ee89"),F=a("9c40"),P=a("05c0"),A=a("0d59"),T=a("cc04"),I=a("1c1c"),R=a("66e5"),z=a("4074"),N=a("0170"),V=a("eebe"),B=a.n(V),U=Object(Q["a"])(E,w,q,!1,null,null,null),H=U.exports;B()(U,"components",{QUploader:$["a"],QBtn:F["a"],QTooltip:P["a"],QSpinner:A["a"],QUploaderAddTrigger:T["a"],QList:I["a"],QItem:R["a"],QItemSection:z["a"],QItemLabel:N["a"]});var L=a("b4fb"),J={name:"di-import-colaborador",components:{"vue-json-to-csv":_.a,"vue-csv-import":H},props:{columns:{type:Array},data:{type:Array}},watch:{csv:function(t){var e=this;this.sendCsv=[],this.failImportation=!1,t.forEach((function(t){e.sendCsv.push(e.brigdeEmployee(t))}))}},data:function(){return{csv:[],failImportation:!1,listFails:[],sendCsv:[],listCategories:[],loading:!1,percentage:0,show:!1}},methods:{brigdeEmployee:function(t){var e={};return e.register=t.matricula,e.name=t.nome,e.hiringdate=this.$moment(t.data_de_admissao,"DD/MM/YYYY").format("YYYY-MM-DD"),e.birthday=this.$moment(t.data_de_nascimento,"DD/MM/YYYY").format("YYYY-MM-DD"),e.periodOk=parseInt(t.periodo_sem_pendencias),e.daysEnjoyed=parseInt(t.qtda_dias_usufruidos_recente),e},showDialog:function(){this.cleanItens(),this.show=!0},onHideDialog:function(){this.show=!1},registerEmployees:function(){var t=this;return m()(d.a.mark((function e(){var a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post(L["a"].importCollaborators,{data:t.sendCsv});case 3:a=e.sent,h["a"].$emit("showNotify",{color:"green",textColor:"white",icon:"eva-info-outline",message:a.data.message}),h["a"].$emit("on-refresh-person"),t.onHideDialog(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},refresh:function(){h["a"].$emit("on-refresh-person")},confirm:function(){this.registerEmployees()},cleanItens:function(){this.csv=[],this.failImportation=!1,this.listFails=[],this.sendCsv=[]},canceled:function(){this.onHideDialog()}}},W=J,G=(a("03a9"),a("24e8")),K=a("f09f"),X=a("65c6"),Z=a("6ac5"),tt=a("a370"),et=a("0016"),at=a("068f"),rt=a("e9c1"),it=a("2bb1"),ot=a("4b7e"),st=a("e669"),nt=a("7f67"),lt=Object(Q["a"])(W,g,y,!1,null,null,null),ct=lt.exports;B()(lt,"components",{QDialog:G["a"],QCard:K["a"],QToolbar:X["a"],QToolbarTitle:Z["a"],QBtn:F["a"],QCardSection:tt["a"],QIcon:et["a"],QImg:at["a"],QSlideTransition:rt["a"],QMarkupTable:it["a"],QCardActions:ot["a"],QSpinnerFacebook:st["a"]}),B()(lt,"directives",{ClosePopup:nt["a"]});var dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{staticStyle:{height:"auto !important"},attrs:{"transition-show":"scale","transition-hide":"scale",persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("q-card",{staticStyle:{width:"1000px","max-width":"80vw","max-height":"80vh",height:"auto !important"}},[r("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[r("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("Colaborador")]),r("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.canceled}})],1),r("q-card-section",{staticStyle:{height:"auto !important"}},[r("div",{staticClass:"row justify-around"},[r("div",{staticClass:"col-md-5 flex flex-center"},[r("q-img",{staticStyle:{"max-width":"500px",opacity:".8"},attrs:{src:a("5489")}})],1),r("div",{staticClass:"col-md-5"},[r("div",{staticClass:"row justify-start"},[r("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",label:"Nome",maxlength:"50",dense:"","error-message":"Campo Precisa ser preenchido",error:t.$v.collaborator.name.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"eva-person-outline"}})]},proxy:!0}]),model:{value:t.collaborator.name,callback:function(e){t.$set(t.collaborator,"name",e)},expression:"collaborator.name"}}),r("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",maxlength:"5",label:"Matricula",dense:"","error-message":"Campo Precisa ser preenchido",error:t.$v.collaborator.register.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"eva-credit-card-outline"}})]},proxy:!0}]),model:{value:t.collaborator.register,callback:function(e){t.$set(t.collaborator,"register",e)},expression:"collaborator.register"}})],1),r("div",{staticClass:"row justify-start ajusta-layout-calendar"},[r("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",dense:"",mask:"##-##-####","reverse-fill-mask":"",label:"Data de Nascimento","error-message":"Campo precisa ser preenchido",error:t.$v.collaborator.birthday.$error},on:{blur:function(e){return t.$v.collaborator.birthday.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"eva-calendar-outline"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{mask:"DD-MM-YYYY","default-view":"Years",locale:t.myLocale},model:{value:t.collaborator.birthday,callback:function(e){t.$set(t.collaborator,"birthday",e)},expression:"collaborator.birthday"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.collaborator.birthday,callback:function(e){t.$set(t.collaborator,"birthday",e)},expression:"collaborator.birthday"}}),r("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"","reverse-fill-mask":"",dense:"",mask:"##-##-####",maxlength:"10",label:"Data de Admissão","error-message":"Campo precisa ser preenchido",error:t.$v.collaborator.hiringdate.$error},on:{blur:function(e){return t.$v.collaborator.hiringdate.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"eva-calendar-outline"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{mask:"DD-MM-YYYY","default-view":"Years",locale:t.myLocale},model:{value:t.collaborator.hiringdate,callback:function(e){t.$set(t.collaborator,"hiringdate",e)},expression:"collaborator.hiringdate"}},[r("div",{staticClass:"row items-center justify-end"},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.collaborator.hiringdate,callback:function(e){t.$set(t.collaborator,"hiringdate",e)},expression:"collaborator.hiringdate"}}),r("q-select",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",options:t.comboType,label:"Tipo de Contratação",dense:"","error-message":"Campo Precisa ser preenchido",error:t.$v.collaborator.type.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"eva-bookmark-outline"}})]},proxy:!0}]),model:{value:t.collaborator.type,callback:function(e){t.$set(t.collaborator,"type",e)},expression:"collaborator.type"}})],1)])])]),r("q-card-section"),r("q-card-actions",{staticClass:"text-teal container-card absolute-bottom-right",staticStyle:{margin:"10px"}},[r("q-btn",{attrs:{color:"primary",dense:"","no-caps":"",label:"salvar"},on:{click:t.confirm}})],1),r("q-inner-loading",{attrs:{showing:t.loading}},[r("q-spinner-facebook",{attrs:{color:"light-blue"}})],1)],1)],1)},ut=[],pt=(a("28a5"),a("b5ae"));function ft(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ht={name:"di-collaborator",events:["on-close"],created:function(){var t=this;h["a"].$on("on-edit-collaborator",(function(e){t.show=!0,t.collaborator=e,t.collaborator.birthday=v()(t.collaborator.birthday,"YYYY-MM-DD").format("DD-MM-YYYY"),t.collaborator.hiringdate=v()(t.collaborator.hiringdate,"YYYY-MM-DD").format("DD-MM-YYYY")})),h["a"].$on("on-new-collaborator",(function(){t.collaborator={},t.$nextTick((function(){t.$v.$reset()})),t.show=!0}))},beforeDestroy:function(){h["a"].$off("on-edit-collaborator"),h["a"].$off("on-new-collaborator")},computed:{draggingInfo:function(){return this.dragging?"under drag":""}},data:function(){return{show:!1,loading:!1,collaborator:{name:"",register:"",hiringdate:"",birthday:"",type:{value:"effective",label:"Efetivo"}},myLocale:{days:"Domingo_Segunda_Terça_Quarta_Quinta_Sexta_Sábado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:1},comboType:[{value:"effective",label:"Efetivo"},{value:"intern",label:"Estagiário"}]}},validations:{collaborator:{name:{required:pt["required"]},register:{required:pt["required"]},hiringdate:{required:pt["required"]},birthday:{required:pt["required"]},type:{required:pt["required"]}}},methods:{onShow:function(t){if(this.cleanFields(),this.show=!0,t){var e=t.birthday,a=t.hiringdate;this.collaborator=t,this.collaborator.birthday=v()(e).format("DD-MM-YYYY"),this.collaborator.hiringdate=v()(a).format("DD-MM-YYYY")}},onHide:function(){this.$emit("on-close"),this.show=!1},confirm:function(){var t=this;return m()(d.a.mark((function e(){var a,r,i,o,s,n;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.validationsFields()){e.next=3;break}return e.abrupt("return");case 3:return a=t.$axios.post,r=t.$api.collaborators,i=t.collaborator,o=i.hiringdate,s=i.birthday,n=mt(mt({},t.collaborator),{},{hiringdate:v()(o,"DD-MM-YYYY").format("YYYY-MM-DD"),birthday:v()(s,"DD-MM-YYYY").format("YYYY-MM-DD")}),n.id&&(r+="/".concat(n.id,"/"),a=t.$axios.put),t.loading=!0,e.next=11,a(r,n);case 11:t.onHide(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))()},validationsFields:function(){return this.$v.collaborator.$touch(),!this.$v.collaborator.$error},cleanFields:function(){this.collaborator={},this.$v.collaborator.$reset()},canceled:function(){this.onHide()}}},bt=ht,vt=(a("51c4"),a("27f9")),gt=a("7cbe"),yt=a("52ee"),xt=a("ddd8"),_t=a("74f7"),wt=a("8572"),qt=Object(Q["a"])(bt,dt,ut,!1,null,null,null),Dt=qt.exports;B()(qt,"components",{QDialog:G["a"],QCard:K["a"],QToolbar:X["a"],QToolbarTitle:Z["a"],QBtn:F["a"],QCardSection:tt["a"],QImg:at["a"],QInput:vt["a"],QIcon:et["a"],QPopupProxy:gt["a"],QDate:yt["a"],QSelect:xt["a"],QCardActions:ot["a"],QInnerLoading:_t["a"],QSpinnerFacebook:st["a"],QField:wt["a"]}),B()(qt,"directives",{ClosePopup:nt["a"]});var Ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale",persistent:""},on:{"before-hide":t.onHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("q-card",{staticClass:"card-vacation"},[r("q-toolbar",{staticClass:"text-white shadow-1 bg-green"},[r("q-toolbar-title",{staticClass:"flex flex-center"},[r("q-icon",{staticClass:"q-mr-md",staticStyle:{display:"block"},attrs:{name:"far fa-user",color:"white",size:"sm"}}),t._v("\n        "+t._s(t.collaborator.name)+"\n      ")],1),r("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.onHide}})],1),r("q-card-section",{class:"bg-"+t.period.situation.color+" q-pt-sm q-pb-sm"},[r("div",{staticClass:"text-white justify-center flex"},[r("div",{staticClass:"q-pa-sm"},[r("q-btn",{attrs:{round:"",flat:"",dense:"",disable:t.moment(t.period.start).year()-1<t.moment(t.collaborator.hiringdate).year(),icon:"eva-chevron-left-outline"},on:{click:function(e){return t.setPeriod("previous")}}})],1),r("div",[r("span",{staticClass:"text-weight-medium flex-center flex q-pa-sm",staticStyle:{"font-size":"1.3rem"}},[t._v("\n            "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+"\n            à\n            "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n          ")])]),r("div",{staticClass:"q-pa-sm"},[r("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"eva-chevron-right-outline"},on:{click:function(e){return t.setPeriod("next")}}})],1)])]),r("q-card-section",{staticClass:"flex flex-center text-subtitle1 q-pt-sm q-pb-sm"},[r("span",{style:{color:t.period.situation.color}},[r("q-icon",{attrs:{size:"md",color:t.period.situation.color,name:t.period.situation.icon}}),t._v("\n        "+t._s(t.period.situation.tooltip)+"\n        "),r("q-tooltip",{attrs:{"content-class":"bg-grey-1 ",offset:[10,10],delay:300,"content-style":{fontSize:"16px",border:"2px solid #BDBDBF",color:t.period.situation.color}}},[t._v("\n          "+t._s(t.period.situation.description)+"\n        ")])],1)]),r("q-card-section",{staticClass:"q-ml-xl q-mt-sm q-mr-xl"},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4",staticStyle:{display:"block"}},[r("q-icon",{staticStyle:{display:"block"},attrs:{name:"eva-calendar-outline",color:"primary",size:"md"}}),r("span",{staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v("\n              Controle de Férias\n            ")]),r("p",{staticClass:"subtitle"},[t._v("\n              Aqui você pode gerir solicitações de férias de seus\n              Colaboradores.\n            ")]),r("q-btn",{attrs:{label:"Agendar Férias",rounded:"","no-caps":"",color:"green",outline:"",disable:t.checkSolicitation(),size:"md"},on:{click:t.solicitationVacation}})],1),r("div",{staticClass:"col-md-7 bg-grey-3 offset-md-1 justify-around",staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif","border-radius":".5rem",border:"1px solid #BDBDBF",transform:"scale(.8)"}},[r("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?r("span",{style:{color:t.period.situation.color}},[t._v("\n                Período\n                "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+" ao\n                "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n              ")]):t._e()]),r("q-separator",{attrs:{inset:""}}),r("div",{staticClass:"text-center text-weight-regular",staticStyle:{"font-size":"1.2rem"}},[t._v("\n              Dias de direito\n            ")]),r("div",{staticClass:"row justify-evenly"},[r("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[r("span",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.period.daysAllowed))]),r("span",{staticClass:"text-weight-regular text-h6"},[t._v("Totais")])]),r("q-separator",{attrs:{vertical:"",inset:""}}),r("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[r("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysBalance)+"\n                ")]),r("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Disponíveis\n                ")])]),r("q-separator",{attrs:{vertical:"",inset:""}}),r("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[r("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysScheduled)+"\n                ")]),r("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Agendados\n                ")])]),r("q-separator",{attrs:{vertical:"",inset:""}}),r("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[r("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysEnjoyed)+"\n                ")]),r("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Usufruidos\n                ")])])],1),r("q-separator",{attrs:{inset:""}}),r("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?r("span",{style:{color:t.period.situation.color}},[t._v("\n                Prazo limite com 6 meses\n                "+t._s(t._f("moment")(t.period.limitEnterprise,"DD-MM-YYYY"))+"\n                "),r("br"),t._v("\n                Prazo limite final\n                "+t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY"))+"\n              ")]):t._e()])],1)])])]),r("q-card-section",{staticClass:"q-ml-xl q-mt-lg q-mr-xl"},[r("div",{staticClass:"row"},[t.period.requests.length?r("div",{staticClass:"col-md-5"},[r("ul",{staticClass:"caixa-ul",staticStyle:{overflow:"auto","max-height":"30vh"}},t._l(t.period.requests,(function(e){return r("li",{key:e.id,staticClass:"row justify-between box-li q-ma-sm"},[r("div",{staticClass:"row justify-between flex-center"},[r("div",{staticClass:"q-ma-md"},[r("circle-calendar",{attrs:{date:e.startDate}})],1),r("div",{staticClass:"column"},[r("q-icon",{attrs:{color:"grey",size:"md",name:"eva-arrow-forward-outline"}}),r("span",{staticClass:"text-grey"},[t._v("\n                    "+t._s(t._f("moment")(e.startDate,"YYYY"))+"\n                  ")])],1),r("div",{staticClass:"q-ma-md"},[r("circle-calendar",{attrs:{date:e.finalDate}})],1),r("div",{staticClass:"q-ma-md "},[r("span",{staticClass:"texto"},[t._v("Férias")]),r("br"),r("span",[t._v("\n                    "+t._s(t.moment(e.finalDate).diff(t.moment(e.startDate),"days"))+"\n                    dias\n                  ")])])]),e.status!==t.status.REQUESTED?r("div",{staticClass:"float-right"},[r("q-chip",{attrs:{clickable:"",color:e.status===t.status.APPROVED?"green-13":"red","text-color":"white"}},[t._v("\n                  "+t._s(e.status===t.status.APPROVED?"Aprovado":"Recusado")+"\n                ")])],1):t._e(),e.status===t.status.REQUESTED?r("div",{staticClass:"q-ma-md"},[r("q-btn",{attrs:{color:"red",round:"",flat:"",push:"",icon:"eva-close-circle-outline"},on:{click:function(a){return t.alterStatusVacation(e,t.status.REFUSED)}}},[r("q-tooltip",[t._v("Rejeitar")])],1),r("q-btn",{staticClass:"q-ml-sm",attrs:{color:"green-13",round:"",push:"",icon:"eva-checkmark-circle-outline"},on:{click:function(a){return t.alterStatusVacation(e,t.status.APPROVED)}}},[r("q-tooltip",[t._v("Aprovar")])],1)],1):t._e(),e.status!==t.status.REQUESTED?r("div",[r("q-btn",{staticClass:"q-ml-sm",attrs:{color:"grey",round:"",flat:"",icon:"eva-more-vertical-outline"}},[r("q-tooltip",[t._v("Aprovar")]),r("q-menu",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"}},[r("q-list",{staticStyle:{"min-width":"100px"}},[r("q-item",{attrs:{clickable:""}},[r("q-item-section",[t._v("Alterar Status")]),r("q-item-section",{attrs:{side:""}},[r("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1),r("q-menu",{attrs:{anchor:"top end",self:"top start"}},[r("q-list",[r("q-item",{attrs:{dense:"",clickable:""},on:{click:function(a){return t.alterStatusVacation(e,e.status===t.status.REFUSED?t.status.APPROVED:t.status.REFUSED)}}},[e.status===t.status.REFUSED?r("q-item-section",[t._v("\n                                Aprovar\n                              ")]):r("q-item-section",[t._v("Recusar")])],1),r("q-item",{attrs:{dense:"",clickable:""},on:{click:function(a){return t.alterStatusVacation(e,t.status.REQUESTED)}}},[r("q-item-section",[t._v("Aguardar")])],1)],1)],1)],1),r("q-item",{attrs:{clickable:""},on:{click:function(a){return t.excluirVacationRequest(e)}}},[r("q-item-section",[t._v("Excluir")])],1)],1)],1)],1)],1):t._e()])})),0)]):r("div",{staticClass:"col-md-6"},[r("q-img",{staticStyle:{"max-width":"285px"},attrs:{src:a("1fab")}}),r("br"),r("span",{staticClass:"text-subtitle1",staticStyle:{color:"#999999"}},[t._v("\n            Não há nenhuma solicitação de férias agendadas\n          ")])],1)])])],1),r("di-vacation-solicitation",{ref:"solicitationVacation",on:{"on-close":function(e){return t.setPeriod("current")}}})],1)},kt=[],St=a("5ba5"),Yt=a("a251"),Ot=a("018a");function Mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Et={name:"di-vacation-request",events:["on-close"],components:{circleCalendar:Yt["a"],diVacationSolicitation:Ot["a"]},data:function(){return{show:!1,moment:v.a,status:St["a"],collaborator:{},situation:{},period:{situation:{},requests:[]}}},mounted:function(){},methods:{onShow:function(t){t&&(this.collaborator=jt({},t),this.situation=jt({},t.situation),this.getPeriod(),this.show=!0)},onHide:function(){this.$emit("on-close"),this.show=!1},getPeriod:function(){var t=this;return m()(d.a.mark((function e(){var a,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get(t.$api.period.replace("{id}",t.collaborator.id));case 3:a=e.sent,r=a.data,t.period=jt({},r),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setPeriod:function(t){var e=this;return m()(d.a.mark((function a(){var r,i,o;return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=v()(e.period.start).clone().year(),a.t0=t,a.next="next"===a.t0?4:"previous"===a.t0?6:"current"===a.t0?8:9;break;case 4:return r++,a.abrupt("break",10);case 6:return r--,a.abrupt("break",10);case 8:return a.abrupt("break",10);case 9:return a.abrupt("return",!1);case 10:return a.next=12,e.$axios.get(e.$api.getPeriodbyYear.replace("{id}",e.collaborator.id),{params:{year:r}});case 12:i=a.sent,o=i.data,e.period=jt({},o);case 15:case"end":return a.stop()}}),a)})))()},excluirVacationRequest:function(t){var e=this;return m()(d.a.mark((function a(){return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$axios.delete(e.$api.vacationrequest.replace("{id}",t.id));case 4:e.setPeriod("current"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:return a.prev=10,e.loading=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})))()},alterStatusVacation:function(t,e){var a=this;return m()(d.a.mark((function r(){var i;return d.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a.loading=!0,i={id:t.id,status:e},r.next=5,a.$axios.post(a.$api.vacationstatus,i);case 5:a.setPeriod("current"),t.status=e,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:return r.prev=12,a.loading=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})))()},solicitationVacation:function(){this.$refs.solicitationVacation.onShow({period:this.period,collaborator:this.collaborator})},checkSolicitation:function(){var t=!0;return t=0===this.period.daysBalance,t}}},Qt=Et,$t=(a("d931"),a("eb85")),Ft=a("b047"),Pt=a("4e73"),At=Object(Q["a"])(Qt,Ct,kt,!1,null,null,null),Tt=At.exports;function It(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Rt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?It(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}B()(At,"components",{QDialog:G["a"],QCard:K["a"],QToolbar:X["a"],QToolbarTitle:Z["a"],QIcon:et["a"],QBtn:F["a"],QCardSection:tt["a"],QTooltip:P["a"],QSeparator:$t["a"],QChip:Ft["a"],QMenu:Pt["a"],QList:I["a"],QItem:R["a"],QItemSection:z["a"],QImg:at["a"],QField:wt["a"]});var zt={name:"dt-colaborator",props:["btn-primary"],components:{"di-import-colaborador":ct,diCollaborator:Dt,diVacation:Tt},data:function(){return{filter:"",moment:v.a,showDelete:!1,loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:100},visibleColumns:["situation","register","type","name","hiringdate","birthday"],columns:[{align:"left",name:"id",label:"id",field:"id",sortable:!0},{align:"left",name:"situation",label:"Situação",sort:function(t,e,a,r){return t.limitMonths-e.limitMonths},field:"situation",sortable:!0},{align:"left",name:"register",label:"Matricula",field:"register",sortable:!0},{align:"left",name:"type",label:"Tipo",field:"type",sortable:!0},{align:"left",name:"name",label:"Nome",field:"name",sortable:!0},{align:"left",name:"birthday",label:"Data de Nascimento",field:"birthday",sortable:!0},{align:"left",name:"hiringdate",label:"Data de Admissão",field:"hiringdate",sortable:!0}],data:[]}},created:function(){var t=this;h["a"].$on("on-refresh-person",(function(){t.refresh()}))},beforeDestroy:function(){h["a"].$off("on-refresh-person")},mounted:function(){this.refresh()},methods:{onRequest:function(t){var e=this;return m()(d.a.mark((function a(){var r,i,o;return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$axios.get(e.$api.collaborators,{params:{filter:t.filter||void 0}});case 4:i=a.sent,o=i.data,(r=e.data).splice.apply(r,[0,e.data.length].concat(p()(o))),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])})))()},deleteCollaborator:function(){var t=this;return m()(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.$axios.delete(t.$api.collaboratorGetBy.replace("{id}",t.collaboratorSelected.id));case 4:t.$q.notify({color:"positive",type:"positive",message:"Colaborador excluido com sucesso!"}),t.collaboratorSelected=void 0,t.refresh(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))()},maskType:function(t){var e="";switch(t){case"effective":e="Efetivo";break;case"intern":e="Estagiário";break;default:e="não identificado";break}return e},customSort:function(t,e,a){var r=p()(t);return e&&r.sort((function(t,r){var i=a?r:t,o=a?t:r;return"name"===e?i[e]>o[e]?1:i[e]<o[e]?-1:0:parseFloat(i[e])-parseFloat(o[e])})),r},openDialogColaborador:function(){this.$refs["di-collaborator"].onShow()},openDialogImportColaborador:function(){this.$refs["di-import-colaborador"].showDialog()},openEdit:function(t){this.$refs["di-collaborator"].onShow(t)},openDelete:function(t){this.showDelete=!0,this.collaboratorSelected=Rt({},t)},openVacation:function(t){this.$refs["di-vacation-request"].onShow(t)},refresh:function(){this.onRequest({filter:void 0})}}},Nt=zt,Vt=(a("dc56"),a("eaac")),Bt=a("bd08"),Ut=a("357e"),Ht=a("db86"),Lt=Object(Q["a"])(Nt,o,s,!1,null,"c435d822",null),Jt=Lt.exports;B()(Lt,"components",{QTable:Vt["a"],QInnerLoading:_t["a"],QSpinnerFacebook:st["a"],QIcon:et["a"],QSeparator:$t["a"],QBtn:F["a"],QInput:vt["a"],QTr:Bt["a"],QTh:Ut["a"],QTd:Ht["a"],QTooltip:P["a"],QMenu:Pt["a"],QList:I["a"],QItem:R["a"],QItemSection:z["a"],QDialog:G["a"],QCard:K["a"],QCardSection:tt["a"],QCardActions:ot["a"]}),B()(Lt,"directives",{ClosePopup:nt["a"]});var Wt={name:"PageColaborator",components:{"dt-collaborator":Jt}},Gt=Wt,Kt=a("9989"),Xt=Object(Q["a"])(Gt,r,i,!1,null,null,null);e["default"]=Xt.exports;B()(Xt,"components",{QPage:Kt["a"]})},"118d":function(t,e,a){},"14f8":function(t,e,a){},"1fab":function(t,e,a){t.exports=a.p+"img/calendar.1b04848a.png"},"3fe3":function(t,e,a){"use strict";var r=a("f8c9"),i=a.n(r);i.a},"51c4":function(t,e,a){"use strict";var r=a("14f8"),i=a.n(r);i.a},5304:function(t,e,a){},5489:function(t,e,a){t.exports=a.p+"img/new_person.5167c980.png"},"5ba5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r={APPROVED:"approved",REQUESTED:"requested",REFUSED:"refused"}},a251:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"50px",height:"50px","border-radius":"20px","background-color":"#f2f4f5","text-align":"center",overflow:"hidden",transition:"background .2s ease-in-out"}},[a("div",{staticStyle:{"font-size":"8px",height:"15px","line-height":"15px","background-color":"#d83556","font-weight":"600",color:"white","text-transform":"uppercase"}},[t._v("\n    "+t._s(t.getMonth(parseInt(t.date.split("-")[1])))+"\n  ")]),a("div",{staticStyle:{"font-size":"16px",height:"35px","line-height":"30px","font-weight":"500"}},[t._v("\n    "+t._s(t._f("moment")(t.date,"DD"))+"\n  ")])])},i=[],o=(a("28a5"),a("c1df")),s=a.n(o),n={name:"circleCalendar",components:{},props:{date:{type:String,default:"2010-01-01"}},data:function(){return{moment:s.a}},methods:{getMonth:function(t){return t--,"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_")[t]}}},l=n,c=a("2877"),d=Object(c["a"])(l,r,i,!1,null,null,null);e["a"]=d.exports},a567:function(t,e,a){t.exports=a.p+"img/new_persons.7994fac6.png"},d14e:function(t,e,a){},d931:function(t,e,a){"use strict";var r=a("5304"),i=a.n(r);i.a},dc56:function(t,e,a){"use strict";var r=a("118d"),i=a.n(r);i.a},f8c9:function(t,e,a){}}]);