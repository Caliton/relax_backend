(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"018a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticStyle:{height:"auto !important"},attrs:{"transition-show":"scale","transition-hide":"scale","full-width":t.maximize,"full-height":t.maximize},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("q-card",{staticStyle:{width:"1000px","max-width":"80vw","max-height":"80vh",height:"auto !important"}},[a("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[a("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("\n        Solicitar Férias\n      ")]),t.maximize?a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-minus-outline"},on:{click:function(e){t.maximize=!1}}}):a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"eva-square-outline"},on:{click:function(e){t.maximize=!0}}}),a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.onHide}})],1),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md flex flex-center",class:{"col-md-6":t.maximize,"col-md-4":!t.maximize}},[a("v-date-picker",{attrs:{"min-date":t.period.start,columns:t.maximize?2:1,rows:t.maximize?2:1,"is-expanded":t.$screens({default:!0,lg:!1}),"is-range":"","is-inline":"",mode:"range",attributes:t.attrs,color:t.rangeIsOk?"green":"red","disabled-dates":t.disableDates},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),a("div",{staticClass:"q-pa-md",class:{"flex flex-center":!t.rangeIsNotNull||t.maximize,"col-md-6":t.maximize,"col-md-7":!t.maximize}},[a("div",{staticClass:"q-pa-md",staticStyle:{"border-radius":".5rem",border:"1px solid #BDBDBF",width:"100%"}},[t.rangeIsNotNull?a("div",[a("div",{staticClass:"column q-pa-md text-center"},[a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  Agendar férias a partir do dia\n                ")]),a("span",{staticClass:"text-h5 text-grey-8"},[t._v("\n                  "+t._s(t._f("moment")(t.rangeDate.start,"DD-MM-YYYY"))+" ao dia\n                  "+t._s(t._f("moment")(t.rangeDate.end,"DD-MM-YYYY"))+"?\n                ")])]),a("q-separator",{attrs:{inset:""}}),a("div",{staticClass:"q-pa-md text-subtitle1"},[a("span",[t._v("\n                  Você pode escolher\n                  "),a("b",[t._v(t._s(30-t.countDaysSolicited()))]),t._v(" dias.\n                ")]),a("br"),a("span",[t._v("\n                  Prazo limite final:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY")))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Dias Selecionados: "),a("b",[t._v(t._s(t.qtdaDias))])]),a("br"),a("span",{staticClass:"text-subtitle1"},[t._v("\n                  Periodo Referente:\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.start,"DD-MM-YYYY")))]),t._v(" à\n                  "),a("b",[t._v(t._s(t._f("moment")(t.period.end,"DD-MM-YYYY")))])])]),a("div",{staticClass:"text-center"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rangeIsOk,expression:"!rangeIsOk"}],staticClass:"text-red"},[t._v("\n                  "+t._s(t.messageRange)+"\n                ")])])],1):a("div",{staticClass:"flex-center flex"},[a("span",{staticClass:"text-h6 text-center text-grey-8"},[t._v("\n                Escolha os dias que anseia em agendar as férias deste\n                colaborador\n              ")])])])])])]),a("q-card-actions",{staticClass:"text-teal container-card absolute-bottom-right"},[a("q-btn",{attrs:{color:t.rangeIsOk?"primary":"red",dense:"","no-caps":"",outline:"",rounded:"",disable:!t.rangeIsOk,label:"Agendar"},on:{click:t.onRegister}})],1),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner-facebook",{attrs:{color:"light-blue"}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{size:"2em",name:"thumb_down",color:"red"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Deseja mesmo excluir a Solicitação?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Vou pensar melhor...",color:"grey"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Sim, não quero mais!",color:"red"},on:{click:t.onDeleteRequest}})],1)],1)],1)],1)},i=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7f7f"),a("448a")),n=a.n(r),o=(a("6762"),a("a481"),a("a34a")),l=a.n(o),c=(a("96cf"),a("c973")),d=a.n(c),u=a("9523"),p=a.n(u),f=a("c1df"),m=a.n(f),h=a("5ba5"),v=a("404b"),b=a.n(v);function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){p()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var x={name:"di-vacation-solicitation",components:{"v-date-picker":b.a},events:["on-close"],data:function(){return{show:!1,loading:!1,showDelete:!1,maximize:!0,period:{},vacation:{},collaborator:{},disableDates:[],rangeIsOk:!1,moment:m.a,messageRange:"",rangeDate:{start:null,end:null},holidayNational:[],attrs:[]}},computed:{rangeIsNotNull:function(){return!!this.rangeDate&&(null!==this.rangeDate.start&&null!==this.rangeDate.end)},qtdaDias:function(){return this.rangeDate?m()(this.rangeDate.end).diff(m()(this.rangeDate.start),"days"):0}},watch:{rangeDate:function(t){this.checkRangeDate()}},mounted:function(){},methods:{onShow:function(t){this.period={},this.rangeDate={start:null,end:null},this.collaborator={},this.show=!0,this.period=y({},t.period),this.collaborator=y({},t.collaborator),this.attrs=[],this.checkDateAcessibles()},onHide:function(){this.$emit("on-close"),this.show=!1},onShowDelete:function(){this.showDelete=!0},onRegister:function(){var t=this;return d()(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={startDate:m()(t.rangeDate.start).format("YYYY-MM-DD"),finalDate:m()(t.rangeDate.end).format("YYYY-MM-DD"),startPeriod:m()(t.period.start).format("YYYY-MM-DD"),requestUser:t.collaborator.id,status:"requested",approvalUser:localStorage.getItem("user_id")},e.next=5,t.$axios.post(t.$api.vacation,a);case 5:t.onHide(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()},onDeleteRequest:function(){var t=this;return d()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.delete(t.$api.vacationrequest.replace("{id}",t.vacation.id));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},countDaysSolicited:function(){return this.period.requests.length?this.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return m()(t.finalDate).diff(t.startDate,"day")})).reduce((function(t,e){return t+e})):0},checkRangeDate:function(){if(!this.rangeDate||!this.rangeDate.start||!this.rangeDate.end)return!1;var t=this.rangeDate,e=t.start,a=t.end,s=5===m()(e).weekday()||6===m()(e).weekday(),i=this.holidayNational.some((function(t){return m()(t.date).subtract(2,"d").format("YYYY-MM-DD")===m()(e).format("YYYY-MM-DD")||m()(t.date).subtract(1,"d").format("YYYY-MM-DD")===m()(e).format("YYYY-MM-DD")}));if(s)return this.messageRange="Não é possível iniciar as férias dois dias antes de domingo",this.rangeIsOk=!1,this.rangeIsOk;if(i)return this.messageRange="Não é possível iniciar as férias dois dias antes de um feriado",this.rangeIsOk=!1,this.rangeIsOk;var r=m()(a).diff(m()(e),"d"),n=[10,15,20,30],o=0,l="10, 15, 20, 30";switch(o=this.countDaysSolicited(),o){case 10:n.splice(n.indexOf(15),1),n.splice(n.indexOf(30),1),l="10 ou 20";break;case 15:n.splice(n.indexOf(10),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1),l="15";break;case 20:n.splice(n.indexOf(15),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1),l="10";break;case 30:n.splice(n.indexOf(10),1),n.splice(n.indexOf(15),1),n.splice(n.indexOf(20),1),n.splice(n.indexOf(30),1);break;default:break}this.messageRange=30===o?"Este periodo atingiu a quantidade máxima de dias de direito solicitado":"Intervalo de dias permitidos: ".concat(l),this.rangeIsOk=n.includes(r)},checkDateAcessibles:function(){var t=this;return d()(l.a.mark((function e(){var a,s,i,r,o,c,d,u,p,f,v,b,g,y;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=function(t){var e="";switch(t){case h["a"].APPROVED:e="intervalo Aprovada";break;case h["a"].REQUESTED:e="intervalo Solicitada";break;case h["a"].REFUSED:e="intervalo Recusado";break;default:e="data solicitado";break}return e},a=function(t){var e="";switch(t){case h["a"].APPROVED:e="green";break;case h["a"].REQUESTED:e="orange";break;case h["a"].REFUSED:e="red";break;default:e="grey";break}return e},t.disableDates=t.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return{start:new Date(t.startDate),end:new Date(t.finalDate)}})),i=t.period.requests.filter((function(t){return t.status!==h["a"].REFUSED})).map((function(t){return{popover:{label:s(t.status),visibility:"hover",hideIndicator:!0},highlight:{color:a(t.status),fillMode:"light"},dates:{start:new Date(t.startDate),end:new Date(t.finalDate)}}})),i.forEach((function(e){t.attrs.push(e)})),e.next=7,t.$axios.get(t.$api.holydayRegional.replace("{year}",m()(t.period.start).year()));case 7:return r=e.sent,o=r.data,e.next=11,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.start).year()));case 11:return c=e.sent,d=c.data,e.next=15,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.end).year()));case 15:return u=e.sent,p=u.data,e.next=19,t.$axios.get(t.$api.holidayNational.replace("{year}",m()(t.period.ultimate).year()));case 19:f=e.sent,v=f.data,b=[].concat(n()(o),n()(d),n()(p),n()(v)),t.holidayNational=b,g=b.map((function(t){return new Date(t.date)})),y={dot:!0,dates:g},t.attrs.push(y),b.forEach((function(e){t.attrs.push({dates:new Date(e.date),popover:{label:e.name}})}));case 27:case"end":return e.stop()}}),e)})))()}}},_=x,w=(a("3fe3"),a("2877")),q=a("24e8"),D=a("f09f"),C=a("65c6"),k=a("6ac5"),S=a("9c40"),Y=a("a370"),M=a("eb85"),O=a("4b7e"),Q=a("74f7"),E=a("e669"),$=a("0016"),F=a("8572"),j=a("7f67"),A=a("eebe"),P=a.n(A),I=Object(w["a"])(_,s,i,!1,null,null,null);e["a"]=I.exports;P()(I,"components",{QDialog:q["a"],QCard:D["a"],QToolbar:C["a"],QToolbarTitle:k["a"],QBtn:S["a"],QCardSection:Y["a"],QSeparator:M["a"],QCardActions:O["a"],QInnerLoading:Q["a"],QSpinnerFacebook:E["a"],QIcon:$["a"],QField:F["a"]}),P()(I,"directives",{ClosePopup:j["a"]})},"03a9":function(t,e,a){"use strict";var s=a("d14e"),i=a.n(s);i.a},"0ac2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"justify-center min-height"},[a("div",[a("dt-collaborator")],1)])},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{staticClass:"my-sticky-header-table",staticStyle:{"background-color":"#FAFAFA"},attrs:{"row-key":"id",loading:t.loading,flat:"",data:t.data,columns:t.columns,"visible-columns":t.visibleColumns,filter:t.filter,"hide-pagination":"",pagination:t.pagination,"rows-per-page-label":"Registros por páginas","no-results-label":"Collaborador não encontrado","no-data-label":"Ainda não temos colaboradores cadastrados"},on:{request:t.onRequest},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}},[a("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1)]},proxy:!0},{key:"top",fn:function(){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{display:"block"}},[a("q-icon",{staticStyle:{display:"block"},attrs:{name:"eva-people-outline",color:"primary",size:"md"}}),a("span",{staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v("\n              Colaboradores\n            ")]),a("p",{staticClass:"subtitle"},[t._v("\n              Sinta-se a vontade para acompanhar o estado atual de seus\n              colaboradores.\n            ")])],1),a("div",{staticClass:"col-md-3 bg-grey-3 offset-md-3 row justify-around",staticStyle:{"border-radius":"1rem",transform:"scale(.7)"}},[a("div",{staticClass:"column justify-center text-center"},[a("span",{staticStyle:{display:"inline-block",font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v(t._s(t.data.length))]),a("span",{staticClass:"text-weight-regular text-h6"},[t._v("Colaboradores")])]),a("q-separator",{attrs:{vertical:"",inset:""}})],1)]),a("div",{staticClass:"row justify-between",class:{"justify-center":t.$q.screen.lt.sm},staticStyle:{width:"100%","margin-top":"1rem"}},[a("div",{staticClass:"col-md-2 col-sm-4"},[a("q-btn",{attrs:{label:"Adicionar Colaborador",dense:"",flat:"","no-caps":"",color:"primary",icon:"add"},on:{click:t.openDialogColaborador}})],1),a("div",{staticClass:"col-md-4 col-sm-4"},[a("q-btn",{attrs:{label:"Importar lista de Colaboradores",dense:"",flat:"","no-caps":"",color:"primary",icon:"eva-cloud-upload-outline"},on:{click:t.openDialogImportColaborador}})],1),a("div",{staticClass:"col-md-4 col-sm-5"},[a("q-input",{staticClass:"float-right",attrs:{dense:"",filled:"",debounce:"750",placeholder:"Busca"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)],1)])])]},proxy:!0},{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},[t._l(e.cols.filter((function(t){return"id"!==t.name})),(function(s){return a("q-th",{key:s.name,attrs:{props:e}},[t._v(t._s(s.label))])})),a("q-th",[t._v(" Ações ")])],2)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"custom-table",attrs:{props:e}},[a("q-td",{key:"situation",staticStyle:{width:"5%"},attrs:{props:e}},[a("q-icon",{attrs:{size:"md",color:e.row.situation.color,name:e.row.situation.icon}}),a("q-tooltip",{attrs:{"content-class":"bg-grey-1 ","content-style":"font-size: 16px; color: #575858; border: 2px solid #BDBDBF; width: 300px",offset:[10,10],delay:300}},[a("div",[t._v("\n               \n              "),a("q-icon",{attrs:{size:"22px",name:e.row.situation.icon,color:e.row.situation.color}}),t._v(" \n              "),a("span",{style:{color:e.row.situation.color}},[t._v(t._s(e.row.situation.description))]),a("br"),a("span",{staticClass:"subtitle",staticStyle:{"font-size":".9rem"}},[t._v("      "+t._s(e.row.situation.tooltip))])],1)])],1),a("q-td",{key:"register",staticStyle:{width:"10%"},attrs:{props:e}},[t._v(t._s(e.row.register))]),a("q-td",{key:"name",staticStyle:{width:"30%"},attrs:{props:e}},[t._v(t._s(e.row.name))]),a("q-td",{key:"birthday",staticStyle:{width:"10%"},attrs:{props:e}},[t._v(t._s(t._f("moment")(e.row.birthday,"DD-MM-YYYY")))]),a("q-td",{key:"hiringdate",staticStyle:{width:"10%"},attrs:{props:e}},[t._v(t._s(t._f("moment")(e.row.hiringdate,"DD-MM-YYYY")))]),a("q-td",{staticStyle:{width:"20%"}},[a("q-btn",{staticClass:"q-ma-xs bg-white",attrs:{size:"sm",flat:"",color:"green",round:"",dense:"",icon:"eva-sun-outline"},on:{click:function(a){return t.openVacation(e.row)}}}),a("q-btn",{staticClass:"q-ma-xs bg-white",attrs:{size:"sm",flat:"",color:"light-blue",round:"",dense:"",icon:"eva-edit-outline"},on:{click:function(a){return t.openEdit(e.row)}}}),a("q-btn",{staticClass:"q-ma-xs bg-white",attrs:{size:"sm",flat:"",color:"red",round:"",dense:"",icon:"eva-trash-2-outline"},on:{click:function(a){return t.openDelete(e.row)}}})],1)],1)]}}])}),a("q-dialog",{attrs:{persistent:""},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{size:"2em",name:"thumb_down",color:"red"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Deseja mesmo excluir o Colaborador?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Vou pensar melhor...",color:"grey"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Desejo sim!",color:"red"},on:{click:t.deleteCollaborator}})],1)],1)],1),a("di-import-colaborador",{ref:"di-import-colaborador",attrs:{columns:t.columns,data:t.data}}),a("di-collaborator",{ref:"di-collaborator",staticStyle:{height:"auto !important"},on:{"on-close":t.refresh}}),a("di-vacation",{ref:"di-vacation-request",on:{"on-close":t.refresh}})],1)},n=[],o=(a("a481"),a("f751"),a("a34a")),l=a.n(o),c=a("448a"),d=a.n(c),u=(a("96cf"),a("c973")),p=a.n(u),f=a("1f7c"),m=a("c1df"),h=a.n(m),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("q-card",{staticStyle:{width:"700px","max-width":"80vw","max-height":"90vh",height:"auto"}},[s("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[s("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("Importar Colaboradores")]),s("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.canceled}})],1),s("q-card-section",[s("div",{staticClass:"row items-center justify-center"},[s("q-icon",{attrs:{size:"2em",name:"eva-cloud-download-outline",color:"primary"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Passo 1) Baixe o Modelo a baixo e preencha-o conforme seu\n          Layout!")])],1),s("div",{staticClass:"row items-center justify-center"},[s("vue-json-to-csv",{attrs:{"json-data":[{register:"",name:"",birthday:"",hiringdate:"",periodOk:"",daysEnjoyed:""}],separator:";","csv-title":"Modelo de Colaboradores",labels:{register:{title:"matricula"},name:{title:"nome"},birthday:{title:"data_de_nascimento"},hiringdate:{title:"data_de_admissao"},periodOk:{title:"periodo_sem_pendencias"},daysEnjoyed:{title:"qtda_dias_usufruidos_recente"}}}},[s("q-btn",{staticClass:"q-ma-sm",attrs:{"no-caps":"",dense:"",label:"Baixar Modelo!",color:"secondary",icon:"eva-cloud-download-outline"}})],1)],1)]),s("q-card-section",{staticClass:"flex flex-center"},[s("div",{staticClass:"row justify-center"},[s("q-img",{staticStyle:{"max-width":"500px",opacity:".8"},attrs:{src:a("a567")}})],1),s("div",{staticClass:"q-mb-lg"},[s("q-icon",{attrs:{size:"2em",name:"eva-settings-outline",color:"primary"}}),s("span",{staticClass:"q-ml-sm"},[t._v("Passo 2) Salve seu Modelo preenchido e arraste-o para esta area\n          abaixo!")])],1),s("div",{staticClass:"row justify-center"},[s("vue-csv-import",{attrs:{inputClass:"col-md-12 custom-file-input",headers:!0,"map-fields":["matricula","nome","data_de_admissao","data_de_nascimento","periodo_sem_pendencias","qtda_dias_usufruidos_recente"],autoMatchFields:"",autoMatchIgnoreCase:""},on:{"reset-csv":function(e){t.csv=[]}},model:{value:t.csv,callback:function(e){t.csv=e},expression:"csv"}})],1)]),s("q-slide-transition",[this.failImportation?s("q-card-section",[this.csv.length?s("div",{staticClass:"flex flex-center"},[s("div",{staticClass:"row"},[this.csv.length-this.listFails.length>0?s("p",{staticClass:"text-weight-light",staticStyle:{color:"green"}},[t._v("\n              "+t._s(t.csv.length-t.listFails.length)+"\n              "+t._s(t.csv.length-t.listFails.length>1?"colaboradores foram inseridos":"colaborador foi inserido")+"!\n            ")]):t._e(),this.csv.length-this.listFails.length===0?s("p",{staticClass:"text-weight-light",staticStyle:{color:"red"}},[t._v("\n              "+t._s(t.listFails.length)+"\n              "+t._s(t.listFails.length>1?"colaboradores tiveram problemas":"colaborador teve problema")+"!\n            ")]):s("p",{staticClass:"text-weight-light",staticStyle:{color:"red"}},[t._v("\n              ...porém "+t._s(t.listFails.length)+"\n              "+t._s(t.listFails.length>1?"tiveram problemas":"teve problema")+"!\n            ")])])]):t._e()]):t._e()],1),s("q-slide-transition",[this.failImportation?s("q-card-section",[this.csv.length?s("div",{staticClass:"flex flex-center"},[s("div",{staticClass:"row"},[s("q-markup-table",{staticClass:"col-12",staticStyle:{"max-height":"30vh"},attrs:{separator:"vertical"}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Linha na Tabela")]),s("th",{staticClass:"text-right"},[t._v("Problema Encontrado")])])]),t._l(t.listFails,(function(e){return s("tbody",{key:e.name},[s("tr",[s("td",{staticClass:"text-left"},[t._v(t._s(e.errorLine))]),s("td",{staticClass:"text-right"},[t._v(t._s(e.error))])])])}))],2)],1)]):t._e()]):t._e()],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"","no-caps":"",label:"Fechar",color:"grey"},on:{click:t.refresh}}),s("q-btn",{attrs:{color:"green",disable:0===this.csv.length||this.failImportation,loading:t.loading,"no-caps":"",icon:"send",label:"Enviar"},on:{click:t.confirm},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner-facebook")]},proxy:!0}])})],1)],1)],1)},b=[],g=a("055a"),y=a.n(g),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row items-center"},[a("div",{staticClass:"form"},[a("div",{staticClass:"vue-csv-uploader-part-one"},[a("q-uploader",{ref:"csv",staticStyle:{"max-width":"300px"},attrs:{name:"csv"},on:{change:function(e){return e.preventDefault(),t.validFileMimeType(e)},added:t.load,removed:t.reset},scopedSlots:t._u([{key:"header",fn:function(e){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[e.queuedFiles.length>0?a("q-btn",{attrs:{icon:"clear_all","no-caps":"",dense:"",flat:""},on:{click:e.removeQueuedFiles}},[t._v("\n              Limpar Area\n              "),a("q-tooltip",[t._v("Limpar area")])],1):t._e(),e.uploadedFiles.length>0?a("q-btn",{attrs:{icon:"done_all",round:"",dense:"",flat:""},on:{click:e.removeUploadedFiles}},[a("q-tooltip",[t._v("Remove Uploaded Files")])],1):t._e(),e.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):t._e(),e.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box","no-caps":"",dense:"",flat:""}},[t._v("\n              Subir Arquivo csv\n              "),a("q-uploader-add-trigger"),a("q-tooltip",[t._v("Adicionar Arquivo CSV")])],1):t._e(),e.isUploading?a("q-btn",{attrs:{icon:"clear",round:"",dense:"",flat:""},on:{click:e.abort}},[a("q-tooltip",[t._v("Abort Upload")])],1):t._e()],1)]}},{key:"list",fn:function(e){return[a("q-list",{attrs:{separator:""}},t._l(e.files,(function(s){return a("q-item",{key:s.name},[a("q-item-section",[a("q-item-label",{staticClass:"full-width ellipsis"},[t._v("\n                  "+t._s(s.name)+"\n                ")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n                  Colaboradores encontrado: "+t._s(t.value.length)+"\n                ")])],1),s.__img?a("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[a("img",{attrs:{src:s.__img.src}})]):t._e(),a("q-item-section",{attrs:{top:"",side:""}},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return e.removeFile(s)}}})],1)],1)})),1)]}}]),model:{value:t.csv,callback:function(e){t.csv=e},expression:"csv"}}),a("div",{staticClass:"form-group csv-import-file"},[t.showErrorMessage?t._t("error",[a("div",{staticClass:"invalid-feedback d-block"},[t._v("Tipo de Arquivo Invalido")])]):t._e()],2),a("div",{staticClass:"form-group"},[t._t("next",null,{load:t.load})],2)],1)])])},_=[],w=(a("7f7f"),a("551c"),a("06db"),a("097d"),a("2ef0")),q=a("bc3a"),D=a.n(q),C=a("369b"),k=a.n(C),S=a("cc1d"),Y=a.n(S),M={events:["reset-csv"],props:{value:Array,url:{type:String},mapFields:{required:!0},callback:{type:Function,default:function(){return{}}},catch:{type:Function,default:function(){return{}}},finally:{type:Function,default:function(){return{}}},parseConfig:{type:Object,default:function(){return{}}},headers:{default:null},loadBtnText:{type:String,default:"Next"},submitBtnText:{type:String,default:"Submit"},autoMatchFields:{type:Boolean,default:!1},autoMatchIgnoreCase:{type:Boolean,default:!1},tableClass:{type:String,default:"table"},checkboxClass:{type:String,default:"form-check-input"},buttonClass:{type:String,default:"btn btn-primary"},inputClass:{type:String,default:"form-control-file"},validation:{type:Boolean,default:!0},fileMimeTypes:{type:Array,default:function(){return["text/csv","text/x-csv","application/vnd.ms-excel","text/plain"]}},tableSelectClass:{type:String,default:"form-control"},canIgnore:{type:Boolean,default:!1}},data:function(){return{form:{csv:null},fieldsToMap:[],map:{},hasHeaders:!0,csv:null,sample:null,isValidFileMimeType:!1,fileSelected:!1}},created:function(){this.hasHeaders=this.headers,Object(w["isArray"])(this.mapFields)?this.fieldsToMap=Object(w["map"])(this.mapFields,(function(t){return{key:t,label:t}})):this.fieldsToMap=Object(w["map"])(this.mapFields,(function(t,e){return{key:e,label:t}}))},methods:{submit:function(){var t=this;this.form.csv=this.buildMappedCsv(),this.$emit("input",this.form.csv),this.url?D.a.post(this.url,this.form).then((function(e){t.callback(e)})).catch((function(e){t.catch(e)})).finally((function(e){t.finally(e)})):t.callback(this.form.csv)},reset:function(){this.$emit("reset-csv")},buildMappedCsv:function(){var t=this,e=this.hasHeaders?Object(w["drop"])(this.csv):this.csv;return Object(w["map"])(e,(function(e){var a={};return Object(w["forEach"])(t.map,(function(t,s){Object(w["set"])(a,s,Object(w["get"])(e,t))})),a}))},validFileMimeType:function(){var t=this.$refs.csv.files[0],e=""===t.type?Y.a.lookup(t.name):t.type;t?(this.fileSelected=!0,this.isValidFileMimeType=!this.validation||this.validateMimeType(e)):(this.isValidFileMimeType=!this.validation,this.fileSelected=!1)},validateMimeType:function(t){return this.fileMimeTypes.indexOf(t)>-1},load:function(){var t=this;this.readFile((function(e){t.sample=Object(w["get"])(k.a.parse(e,{preview:2,skipEmptyLines:!0}),"data"),t.csv=Object(w["get"])(k.a.parse(e,{skipEmptyLines:!0}),"data")}))},readFile:function(t){var e=this.$refs.csv.files[0];if(e){var a=new FileReader;a.readAsText(e,"UTF-8"),a.onload=function(e){t(e.target.result)},a.onerror=function(){}}},toggleHasHeaders:function(){this.hasHeaders=!this.hasHeaders},makeId:function(t){return"".concat(t).concat(this._uid)}},watch:{map:{deep:!0,handler:function(t){if(!this.url){var e=Array.isArray(this.mapFields)?Object(w["every"])(this.mapFields,(function(e){return t.hasOwnProperty(e)})):Object(w["every"])(this.mapFields,(function(e,a){return t.hasOwnProperty(a)}));e&&this.submit()}}},sample:function(t,e){var a=this;this.autoMatchFields&&null!==t&&this.fieldsToMap.forEach((function(e){t[0].forEach((function(t,s){!0===a.autoMatchIgnoreCase?e.label.toLowerCase().trim()===t.toLowerCase().trim()&&a.$set(a.map,e.key,s):e.label.trim()===t.trim()&&a.$set(a.map,e.key,s)}))}))}},computed:{firstRow:function(){return Object(w["get"])(this,"sample.0")},showErrorMessage:function(){return this.fileSelected&&!this.isValidFileMimeType},disabledNextButton:function(){return!this.isValidFileMimeType}}},O=M,Q=a("2877"),E=a("ee89"),$=a("9c40"),F=a("05c0"),j=a("0d59"),A=a("cc04"),P=a("1c1c"),I=a("66e5"),T=a("4074"),R=a("0170"),z=a("eebe"),N=a.n(z),B=Object(Q["a"])(O,x,_,!1,null,null,null),V=B.exports;N()(B,"components",{QUploader:E["a"],QBtn:$["a"],QTooltip:F["a"],QSpinner:j["a"],QUploaderAddTrigger:A["a"],QList:P["a"],QItem:I["a"],QItemSection:T["a"],QItemLabel:R["a"]});var U=a("b4fb"),H={name:"di-import-colaborador",components:{"vue-json-to-csv":y.a,"vue-csv-import":V},props:{columns:{type:Array},data:{type:Array}},watch:{csv:function(t){var e=this;this.sendCsv=[],this.failImportation=!1,t.forEach((function(t){e.sendCsv.push(e.brigdeEmployee(t))}))}},data:function(){return{csv:[],failImportation:!1,listFails:[],sendCsv:[],listCategories:[],loading:!1,percentage:0,show:!1}},methods:{brigdeEmployee:function(t){var e={};return e.register=t.matricula,e.name=t.nome,e.hiringdate=this.$moment(t.data_de_admissao,"DD/MM/YYYY").format("YYYY-MM-DD"),e.birthday=this.$moment(t.data_de_nascimento,"DD/MM/YYYY").format("YYYY-MM-DD"),e.periodOk=parseInt(t.periodo_sem_pendencias),e.daysEnjoyed=parseInt(t.qtda_dias_usufruidos_recente),e},showDialog:function(){this.cleanItens(),this.show=!0},onHideDialog:function(){this.show=!1},registerEmployees:function(){var t=this;return p()(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post(U["a"].importCollaborators,{data:t.sendCsv});case 3:a=e.sent,f["a"].$emit("showNotify",{color:"green",textColor:"white",icon:"eva-info-outline",message:a.data.message}),f["a"].$emit("on-refresh-person"),t.onHideDialog(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},refresh:function(){f["a"].$emit("on-refresh-person")},confirm:function(){this.registerEmployees()},cleanItens:function(){this.csv=[],this.failImportation=!1,this.listFails=[],this.sendCsv=[]},canceled:function(){this.onHideDialog()}}},L=H,J=(a("03a9"),a("24e8")),W=a("f09f"),G=a("65c6"),K=a("6ac5"),X=a("a370"),Z=a("0016"),tt=a("068f"),et=a("e9c1"),at=a("2bb1"),st=a("4b7e"),it=a("e669"),rt=a("7f67"),nt=Object(Q["a"])(L,v,b,!1,null,null,null),ot=nt.exports;N()(nt,"components",{QDialog:J["a"],QCard:W["a"],QToolbar:G["a"],QToolbarTitle:K["a"],QBtn:$["a"],QCardSection:X["a"],QIcon:Z["a"],QImg:tt["a"],QSlideTransition:et["a"],QMarkupTable:at["a"],QCardActions:st["a"],QSpinnerFacebook:it["a"]}),N()(nt,"directives",{ClosePopup:rt["a"]});var lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{staticStyle:{height:"auto !important"},attrs:{"transition-show":"scale","transition-hide":"scale",persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("q-card",{staticStyle:{width:"1000px","max-width":"80vw","max-height":"80vh",height:"auto !important"}},[s("q-toolbar",{staticClass:"bg-primary text-white shadow-1"},[s("q-toolbar-title",{staticClass:"flex flex-center"},[t._v("Colaborador")]),s("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.canceled}})],1),s("q-card-section",{staticStyle:{height:"auto !important"}},[s("div",{staticClass:"row justify-around"},[s("div",{staticClass:"col-md-5 flex flex-center"},[s("q-img",{staticStyle:{"max-width":"500px",opacity:".8"},attrs:{src:a("5489")}})],1),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"row justify-start"},[s("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",label:"Nome",dense:"","error-message":"Campo Precisa ser preenchido",error:t.$v.person.name.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"eva-person-outline"}})]},proxy:!0}]),model:{value:t.person.name,callback:function(e){t.$set(t.person,"name",e)},expression:"person.name"}}),s("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",label:"Matricula",dense:"","error-message":"Campo Precisa ser preenchido",error:t.$v.person.register.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"eva-file-text-outline"}})]},proxy:!0}]),model:{value:t.person.register,callback:function(e){t.$set(t.person,"register",e)},expression:"person.register"}})],1),s("div",{staticClass:"row justify-start ajusta-layout-calendar"},[s("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"",dense:"",mask:"##-##-####","reverse-fill-mask":"",label:"Data de Nascimento","error-message":"Campo precisa ser preenchido",error:t.$v.person.birthday.$error},on:{blur:function(e){return t.$v.person.birthday.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"DD-MM-YYYY","default-view":"Years",locale:t.myLocale},model:{value:t.person.birthday,callback:function(e){t.$set(t.person,"birthday",e)},expression:"person.birthday"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.person.birthday,callback:function(e){t.$set(t.person,"birthday",e)},expression:"person.birthday"}}),s("q-input",{staticClass:"col-md-12 q-ma-sm",attrs:{filled:"","reverse-fill-mask":"",dense:"",mask:"##-##-####",label:"Data de Admissão","error-message":"Campo precisa ser preenchido",error:t.$v.person.hiringdate.$error},on:{blur:function(e){return t.$v.person.hiringdate.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"DD-MM-YYYY","default-view":"Years",locale:t.myLocale},model:{value:t.person.hiringdate,callback:function(e){t.$set(t.person,"hiringdate",e)},expression:"person.hiringdate"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.person.hiringdate,callback:function(e){t.$set(t.person,"hiringdate",e)},expression:"person.hiringdate"}})],1)])])]),s("q-card-section"),s("q-card-actions",{staticClass:"text-teal container-card absolute-bottom-right",staticStyle:{margin:"10px"}},[s("q-btn",{attrs:{color:"primary",dense:"","no-caps":"",label:"salvar"},on:{click:t.confirm}})],1),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-facebook",{attrs:{color:"light-blue"}})],1)],1)],1)},ct=[],dt=(a("28a5"),a("b5ae")),ut={name:"di-collaborator",events:["on-close"],created:function(){var t=this;f["a"].$on("on-edit-person",(function(e){t.show=!0,t.person=e,t.person.birthday=h()(t.person.birthday,"YYYY-MM-DD").format("DD-MM-YYYY"),t.person.hiringdate=h()(t.person.hiringdate,"YYYY-MM-DD").format("DD-MM-YYYY")})),f["a"].$on("on-new-person",(function(){t.person={},t.$nextTick((function(){t.$v.$reset()})),t.show=!0}))},beforeDestroy:function(){f["a"].$off("on-edit-person"),f["a"].$off("on-new-person")},computed:{draggingInfo:function(){return this.dragging?"under drag":""}},data:function(){return{show:!1,loading:!1,person:{name:"",register:"",hiringdate:"",birthday:""},myLocale:{days:"Domingo_Segunda_Terça_Quarta_Quinta_Sexta_Sábado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:1}}},validations:{person:{name:{required:dt["required"]},register:{required:dt["required"]},hiringdate:{required:dt["required"]},birthday:{required:dt["required"]}}},methods:{onShow:function(t){if(this.cleanFields(),this.show=!0,t){var e=t.birthday,a=t.hiringdate;this.person=t,this.person.birthday=h()(e).format("DD-MM-YYYY"),this.person.hiringdate=h()(a).format("DD-MM-YYYY")}},onHide:function(){this.$emit("on-close"),this.show=!1},confirm:function(){var t=this;return p()(l.a.mark((function e(){var a,s,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.validationsFields()){e.next=3;break}return e.abrupt("return");case 3:return a=t.$axios.post,s=U["a"].collaborators,i=Object.assign({},t.person),i.hiringdate=h()(t.person.hiringdate,"DD-MM-YYYY").format("YYYY-MM-DD"),i.birthday=h()(t.person.birthday,"DD-MM-YYYY").format("YYYY-MM-DD"),i.id&&(s+="/".concat(i.id,"/"),a=t.$axios.put),t.loading=!0,e.next=12,a(s,i);case 12:t.onHide(),t.show=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),console.log(e.t0);case 19:return e.prev=19,t.loading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})))()},validationsFields:function(){return this.$v.person.$touch(),!this.$v.person.$error},cleanFields:function(){this.person={},this.$v.person.$reset()},canceled:function(){this.onHide()}}},pt=ut,ft=(a("51c4"),a("27f9")),mt=a("7cbe"),ht=a("52ee"),vt=a("74f7"),bt=a("8572"),gt=Object(Q["a"])(pt,lt,ct,!1,null,null,null),yt=gt.exports;N()(gt,"components",{QDialog:J["a"],QCard:W["a"],QToolbar:G["a"],QToolbarTitle:K["a"],QBtn:$["a"],QCardSection:X["a"],QImg:tt["a"],QInput:ft["a"],QIcon:Z["a"],QPopupProxy:mt["a"],QDate:ht["a"],QCardActions:st["a"],QInnerLoading:vt["a"],QSpinnerFacebook:it["a"],QField:bt["a"]}),N()(gt,"directives",{ClosePopup:rt["a"]});var xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale",persistent:""},on:{"before-hide":t.onHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("q-card",{staticClass:"card-vacation"},[s("q-toolbar",{staticClass:"text-white shadow-1 bg-green"},[s("q-toolbar-title",{staticClass:"flex flex-center"},[s("q-icon",{staticClass:"q-mr-md",staticStyle:{display:"block"},attrs:{name:"far fa-user",color:"white",size:"sm"}}),t._v("\n        "+t._s(t.collaborator.name)+"\n      ")],1),s("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.onHide}})],1),s("q-card-section",{class:"bg-"+t.period.situation.color+" q-pt-sm q-pb-sm"},[s("div",{staticClass:"text-white justify-center flex"},[s("div",{staticClass:"q-pa-sm"},[s("q-btn",{attrs:{round:"",flat:"",dense:"",disable:t.moment(t.period.start).year()-1<t.moment(t.collaborator.hiringdate).year(),icon:"eva-chevron-left-outline"},on:{click:function(e){return t.setPeriod("previous")}}})],1),s("div",[s("span",{staticClass:"text-weight-medium flex-center flex q-pa-sm",staticStyle:{"font-size":"1.3rem"}},[t._v("\n            "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+"\n            à\n            "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n          ")])]),s("div",{staticClass:"q-pa-sm"},[s("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"eva-chevron-right-outline"},on:{click:function(e){return t.setPeriod("next")}}})],1)])]),s("q-card-section",{staticClass:"flex flex-center text-subtitle1 q-pt-sm q-pb-sm"},[s("span",{style:{color:t.period.situation.color}},[s("q-icon",{attrs:{size:"md",color:t.period.situation.color,name:t.period.situation.icon}}),t._v("\n        "+t._s(t.period.situation.tooltip)+"\n        "),s("q-tooltip",{attrs:{"content-class":"bg-grey-1 ",offset:[10,10],delay:300,"content-style":{fontSize:"16px",border:"2px solid #BDBDBF",color:t.period.situation.color}}},[t._v("\n          "+t._s(t.period.situation.description)+"\n        ")])],1)]),s("q-card-section",{staticClass:"q-ml-xl q-mt-sm q-mr-xl"},[s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4",staticStyle:{display:"block"}},[s("q-icon",{staticStyle:{display:"block"},attrs:{name:"eva-calendar-outline",color:"primary",size:"md"}}),s("span",{staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif"}},[t._v("\n              Controle de Férias\n            ")]),s("p",{staticClass:"subtitle"},[t._v("\n              Aqui você pode gerir solicitações de férias de seus\n              Colaboradores.\n            ")]),s("q-btn",{attrs:{label:"Agendar Férias",rounded:"","no-caps":"",color:"green",outline:"",disable:t.checkSolicitation(),size:"md"},on:{click:t.solicitationVacation}})],1),s("div",{staticClass:"col-md-7 bg-grey-3 offset-md-1 justify-around",staticStyle:{font:"25px/36px Avenir Next W01,Helvetica,Arial,sans-serif","border-radius":".5rem",border:"1px solid #BDBDBF",transform:"scale(.8)"}},[s("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?s("span",{style:{color:t.period.situation.color}},[t._v("\n                Período\n                "+t._s(t._f("moment")(t.period.start,"DD-MM-YYYY"))+" ao\n                "+t._s(t._f("moment")(t.period.end,"DD-MM-YYYY"))+"\n              ")]):t._e()]),s("q-separator",{attrs:{inset:""}}),s("div",{staticClass:"text-center text-weight-regular",staticStyle:{"font-size":"1.2rem"}},[t._v("\n              Dias de direito\n            ")]),s("div",{staticClass:"row justify-evenly"},[s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.period.daysAllowed))]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("Totais")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysBalance)+"\n                ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Disponíveis\n                ")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysScheduled)+"\n                ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Agendados\n                ")])]),s("q-separator",{attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column justify-center text-center",staticStyle:{transform:"scale(.9)"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v("\n                  "+t._s(t.period.daysEnjoyed)+"\n                ")]),s("span",{staticClass:"text-weight-regular text-h6"},[t._v("\n                  Usufruidos\n                ")])])],1),s("q-separator",{attrs:{inset:""}}),s("div",{staticClass:"q-pa-sm text-center text-subtitle1"},[t.period.limitEnterprise?s("span",{style:{color:t.period.situation.color}},[t._v("\n                Prazo limite com 6 meses\n                "+t._s(t._f("moment")(t.period.limitEnterprise,"DD-MM-YYYY"))+"\n                "),s("br"),t._v("\n                Prazo limite final\n                "+t._s(t._f("moment")(t.period.ultimate,"DD-MM-YYYY"))+"\n              ")]):t._e()])],1)])])]),s("q-card-section",{staticClass:"q-ml-xl q-mt-lg q-mr-xl"},[s("div",{staticClass:"row"},[t.period.requests.length?s("div",{staticClass:"col-md-5"},[s("ul",{staticClass:"caixa-ul",staticStyle:{overflow:"auto","max-height":"30vh"}},t._l(t.period.requests,(function(e){return s("li",{key:e.id,staticClass:"row justify-between box-li q-ma-sm"},[s("div",{staticClass:"row justify-between flex-center"},[s("div",{staticClass:"q-ma-md"},[s("circle-calendar",{attrs:{date:e.startDate}})],1),s("div",{staticClass:"column"},[s("q-icon",{attrs:{color:"grey",size:"md",name:"eva-arrow-forward-outline"}}),s("span",{staticClass:"text-grey"},[t._v("\n                    "+t._s(t._f("moment")(e.startDate,"YYYY"))+"\n                  ")])],1),s("div",{staticClass:"q-ma-md"},[s("circle-calendar",{attrs:{date:e.finalDate}})],1),s("div",{staticClass:"q-ma-md "},[s("span",{staticClass:"texto"},[t._v("Férias")]),s("br"),s("span",[t._v("\n                    "+t._s(t.moment(e.finalDate).diff(t.moment(e.startDate),"days"))+"\n                    dias\n                  ")])])]),e.status!==t.status.REQUESTED?s("div",{staticClass:"float-right"},[s("q-chip",{attrs:{clickable:"",color:e.status===t.status.APPROVED?"green-13":"red","text-color":"white"}},[t._v("\n                  "+t._s(e.status===t.status.APPROVED?"Aprovado":"Recusado")+"\n                ")])],1):t._e(),e.status===t.status.REQUESTED?s("div",{staticClass:"q-ma-md"},[s("q-btn",{attrs:{color:"red",round:"",flat:"",push:"",icon:"eva-close-circle-outline"},on:{click:function(a){return t.alterStatusVacation(e,t.status.REFUSED)}}},[s("q-tooltip",[t._v("Rejeitar")])],1),s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"green-13",round:"",push:"",icon:"eva-checkmark-circle-outline"},on:{click:function(a){return t.alterStatusVacation(e,t.status.APPROVED)}}},[s("q-tooltip",[t._v("Aprovar")])],1)],1):t._e(),e.status!==t.status.REQUESTED?s("div",[s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"grey",round:"",flat:"",icon:"eva-more-vertical-outline"}},[s("q-tooltip",[t._v("Aprovar")]),s("q-menu",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"}},[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{attrs:{clickable:""}},[s("q-item-section",[t._v("Alterar Status")]),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1),s("q-menu",{attrs:{anchor:"top end",self:"top start"}},[s("q-list",[s("q-item",{attrs:{dense:"",clickable:""},on:{click:function(a){return t.alterStatusVacation(e,e.status===t.status.REFUSED?t.status.APPROVED:t.status.REFUSED)}}},[e.status===t.status.REFUSED?s("q-item-section",[t._v("\n                                Aprovar\n                              ")]):s("q-item-section",[t._v("Recusar")])],1),s("q-item",{attrs:{dense:"",clickable:""},on:{click:function(a){return t.alterStatusVacation(e,t.status.REQUESTED)}}},[s("q-item-section",[t._v("Aguardar")])],1)],1)],1)],1),s("q-item",{attrs:{clickable:""},on:{click:function(a){return t.excluirVacationRequest(e)}}},[s("q-item-section",[t._v("Excluir")])],1)],1)],1)],1)],1):t._e()])})),0)]):s("div",{staticClass:"col-md-6"},[s("q-img",{staticStyle:{"max-width":"285px"},attrs:{src:a("1fab")}}),s("br"),s("span",{staticClass:"text-subtitle1",staticStyle:{color:"#999999"}},[t._v("\n            Não há nenhuma solicitação de férias agendadas\n          ")])],1)])])],1),s("di-vacation-solicitation",{ref:"solicitationVacation",on:{"on-close":function(e){return t.setPeriod("current")}}})],1)},_t=[],wt=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("9523")),qt=a.n(wt),Dt=a("5ba5"),Ct=a("a251"),kt=a("018a");function St(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?St(Object(a),!0).forEach((function(e){qt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Mt={name:"di-vacation-request",events:["on-close"],components:{circleCalendar:Ct["a"],diVacationSolicitation:kt["a"]},data:function(){return{show:!1,moment:h.a,status:Dt["a"],collaborator:{},situation:{},period:{situation:{},requests:[]}}},mounted:function(){},methods:{onShow:function(t){t&&(this.collaborator=Yt({},t),this.situation=Yt({},t.situation),this.getPeriod(),this.show=!0)},onHide:function(){this.$emit("on-close"),this.show=!1},getPeriod:function(){var t=this;return p()(l.a.mark((function e(){var a,s;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get(t.$api.period.replace("{id}",t.collaborator.id));case 3:a=e.sent,s=a.data,t.period=Yt({},s),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setPeriod:function(t){var e=this;return p()(l.a.mark((function a(){var s,i,r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=h()(e.period.start).clone().year(),a.t0=t,a.next="next"===a.t0?4:"previous"===a.t0?6:"current"===a.t0?8:9;break;case 4:return s++,a.abrupt("break",10);case 6:return s--,a.abrupt("break",10);case 8:return a.abrupt("break",10);case 9:return a.abrupt("return",!1);case 10:return a.next=12,e.$axios.get(e.$api.getPeriodbyYear.replace("{id}",e.collaborator.id),{params:{year:s}});case 12:i=a.sent,r=i.data,e.period=Yt({},r);case 15:case"end":return a.stop()}}),a)})))()},excluirVacationRequest:function(t){var e=this;return p()(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$axios.delete(e.$api.vacationrequest.replace("{id}",t.id));case 4:e.setPeriod("current"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:return a.prev=10,e.loading=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})))()},alterStatusVacation:function(t,e){var a=this;return p()(l.a.mark((function s(){var i;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a.loading=!0,i={id:t.id,status:e},s.next=5,a.$axios.post(a.$api.vacationstatus,i);case 5:a.setPeriod("current"),t.status=e,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:return s.prev=12,a.loading=!1,s.finish(12);case 15:case"end":return s.stop()}}),s,null,[[0,9,12,15]])})))()},solicitationVacation:function(){this.$refs.solicitationVacation.onShow({period:this.period,collaborator:this.collaborator})},checkSolicitation:function(){var t=!0;return t=0===this.period.daysBalance,t}}},Ot=Mt,Qt=(a("d931"),a("eb85")),Et=a("b047"),$t=a("4e73"),Ft=Object(Q["a"])(Ot,xt,_t,!1,null,null,null),jt=Ft.exports;N()(Ft,"components",{QDialog:J["a"],QCard:W["a"],QToolbar:G["a"],QToolbarTitle:K["a"],QIcon:Z["a"],QBtn:$["a"],QCardSection:X["a"],QTooltip:F["a"],QSeparator:Qt["a"],QChip:Et["a"],QMenu:$t["a"],QList:P["a"],QItem:I["a"],QItemSection:T["a"],QImg:tt["a"],QField:bt["a"]});var At={name:"dt-colaborator",props:["btn-primary"],components:{"di-import-colaborador":ot,diCollaborator:yt,diVacation:jt},data:function(){return{filter:"",moment:h.a,showDelete:!1,loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:100},visibleColumns:["situation","register","name","hiringdate","birthday"],columns:[{align:"left",name:"id",label:"id",field:"id",sortable:!0},{align:"left",name:"situation",label:"Situação",sort:function(t,e,a,s){return t.limitMonths-e.limitMonths},field:"situation",sortable:!0},{align:"left",name:"register",label:"Matricula",field:"register",sortable:!0},{align:"left",name:"name",label:"Nome",field:"name",sortable:!0},{align:"left",name:"birthday",label:"Data de Nascimento",field:"birthday",sortable:!0},{align:"left",name:"hiringdate",label:"Data de Admissão",field:"hiringdate",sortable:!0}],data:[]}},created:function(){var t=this;f["a"].$on("on-refresh-person",(function(){t.refresh()}))},beforeDestroy:function(){f["a"].$off("on-refresh-person")},mounted:function(){this.refresh()},methods:{onRequest:function(t){var e=this;return p()(l.a.mark((function a(){var s,i,r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,e.$axios.get(e.$api.collaborators,{params:{filter:t.filter||void 0}});case 4:i=a.sent,r=i.data,(s=e.data).splice.apply(s,[0,e.data.length].concat(d()(r))),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])})))()},customSort:function(t,e,a){var s=d()(t);return e&&s.sort((function(t,s){var i=a?s:t,r=a?t:s;return"name"===e?i[e]>r[e]?1:i[e]<r[e]?-1:0:parseFloat(i[e])-parseFloat(r[e])})),s},openDialogColaborador:function(){this.$refs["di-collaborator"].onShow()},openDialogImportColaborador:function(){this.$refs["di-import-colaborador"].showDialog()},openEdit:function(t){this.$refs["di-collaborator"].onShow(t)},openDelete:function(t){this.showDelete=!0,this.collaboratorFocus=Object.assign({},t)},openVacation:function(t){this.$refs["di-vacation-request"].onShow(t)},refresh:function(){this.onRequest({filter:void 0})},deleteCollaborator:function(){var t=this;return p()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.$axios.delete("".concat(api.collaboratorGetBy.replace("{id}",t.collaboratorFocus.id),"/"));case 4:t.$q.notify({color:"positive",type:"positive",message:"Colaborador Excluido com Sucesso!"}),t.collaboratorFocus=void 0,t.refresh(),t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.loading=!1,console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},Pt=At,It=(a("3cb5"),a("eaac")),Tt=a("bd08"),Rt=a("357e"),zt=a("db86"),Nt=Object(Q["a"])(Pt,r,n,!1,null,"278a4b64",null),Bt=Nt.exports;N()(Nt,"components",{QTable:It["a"],QInnerLoading:vt["a"],QSpinnerFacebook:it["a"],QIcon:Z["a"],QSeparator:Qt["a"],QBtn:$["a"],QInput:ft["a"],QTr:Tt["a"],QTh:Rt["a"],QTd:zt["a"],QTooltip:F["a"],QDialog:J["a"],QCard:W["a"],QCardSection:X["a"],QCardActions:st["a"]}),N()(Nt,"directives",{ClosePopup:rt["a"]});var Vt={name:"PageColaborator",components:{"dt-collaborator":Bt}},Ut=Vt,Ht=a("9989"),Lt=Object(Q["a"])(Ut,s,i,!1,null,null,null);e["default"]=Lt.exports;N()(Lt,"components",{QPage:Ht["a"]})},"0f68":function(t,e,a){},"14f8":function(t,e,a){},"1fab":function(t,e,a){t.exports=a.p+"img/calendar.1b04848a.png"},"3cb5":function(t,e,a){"use strict";var s=a("0f68"),i=a.n(s);i.a},"3fe3":function(t,e,a){"use strict";var s=a("f8c9"),i=a.n(s);i.a},"51c4":function(t,e,a){"use strict";var s=a("14f8"),i=a.n(s);i.a},5304:function(t,e,a){},5489:function(t,e,a){t.exports=a.p+"img/new_person.5167c980.png"},"5ba5":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s={APPROVED:"approved",REQUESTED:"requested",REFUSED:"refused"}},a251:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"50px",height:"50px","border-radius":"20px","background-color":"#f2f4f5","text-align":"center",overflow:"hidden",transition:"background .2s ease-in-out"}},[a("div",{staticStyle:{"font-size":"8px",height:"15px","line-height":"15px","background-color":"#d83556","font-weight":"600",color:"white","text-transform":"uppercase"}},[t._v("\n    "+t._s(t.getMonth(parseInt(t.date.split("-")[1])))+"\n  ")]),a("div",{staticStyle:{"font-size":"16px",height:"35px","line-height":"30px","font-weight":"500"}},[t._v("\n    "+t._s(t._f("moment")(t.date,"DD"))+"\n  ")])])},i=[],r=(a("28a5"),a("c1df")),n=a.n(r),o={name:"circleCalendar",components:{},props:{date:{type:String,default:"2010-01-01"}},data:function(){return{moment:n.a}},methods:{getMonth:function(t){return t--,"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_")[t]}}},l=o,c=a("2877"),d=Object(c["a"])(l,s,i,!1,null,null,null);e["a"]=d.exports},a567:function(t,e,a){t.exports=a.p+"img/new_persons.7994fac6.png"},d14e:function(t,e,a){},d931:function(t,e,a){"use strict";var s=a("5304"),i=a.n(s);i.a},f8c9:function(t,e,a){}}]);